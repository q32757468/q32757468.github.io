<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ranshan丶</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://q32757468.github.io/"/>
  <updated>2019-09-16T01:46:36.493Z</updated>
  <id>https://q32757468.github.io/</id>
  
  <author>
    <name>hsl</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>JS实现上传图片并且将图片缓存到本地</title>
    <link href="https://q32757468.github.io/2019/09/16/JS%E5%AE%9E%E7%8E%B0%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%B9%B6%E4%B8%94%E5%B0%86%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98%E5%88%B0%E6%9C%AC%E5%9C%B0/"/>
    <id>https://q32757468.github.io/2019/09/16/JS实现上传图片并且将图片缓存到本地/</id>
    <published>2019-09-16T01:42:06.000Z</published>
    <updated>2019-09-16T01:46:36.493Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其实这篇文章是建立在前面的实现上传图片并且预览的文章之上的，也交代了其实做这些只是为了完成我的chrome插件的开发中的自定义上传图片并且保存下来，当时一开始没有一个满意的思路，不过现在通过搜索一些资料也想到了一个我比较满意的思路，这篇博客就来将这个思路实现一下。<br><a id="more"></a></p></blockquote><p>### </p><p>### </p><p>###</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;其实这篇文章是建立在前面的实现上传图片并且预览的文章之上的，也交代了其实做这些只是为了完成我的chrome插件的开发中的自定义上传图片并且保存下来，当时一开始没有一个满意的思路，不过现在通过搜索一些资料也想到了一个我比较满意的思路，这篇博客就来将这个思路实现一下。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>jQuery原理解析</title>
    <link href="https://q32757468.github.io/2019/09/15/jQuery%E5%8E%9F%E7%90%86%E8%A7%A3%E6%9E%90/"/>
    <id>https://q32757468.github.io/2019/09/15/jQuery原理解析/</id>
    <published>2019-09-15T08:44:24.000Z</published>
    <updated>2019-09-15T11:42:47.007Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在刚开始学习jQuery的时候就很配置能写出这样的库的人，虽然我能想到jQuery是通过内部封装了大量的方法来实现函数的扩展的，当时并不了解jQuery究竟是怎样将一个dom对象处理成一个jQuery对象的，又是如何处理其他对象的，直到我阅读了jQuery的源码还有结合别人对jQuery源码的理解我才理解了jQuery的源码的机制，也不得不感叹很多地方是如此的巧妙。所以这篇文章主要讲一下jQuery的核心函数以及一些机制。虽然jQuery已经有些过时了，当时我觉得学习了解这款优秀的项目也是提升自己的一大途径。<br><a id="more"></a></p></blockquote><h3 id="jQuery的基本结构"><a href="#jQuery的基本结构" class="headerlink" title="jQuery的基本结构"></a>jQuery的基本结构</h3><p>理解jQuery源码，可以从jQuery的结构开始，jQuery是采用构造函数模式开发的，jQuery本身就是一个构造函数，是一个类而jQuery中的大部分的方法都是再这个类的原型上的，所以只有jQuery的实例才能使用这些方法或者是属性，而这些我们也可以通过它的源码看出：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params"> window, undefined </span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> jQuery = <span class="function"><span class="keyword">function</span>(<span class="params"> </span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> jQuery.prototype.init( );</span><br><span class="line">    &#125;</span><br><span class="line">    jQuery.prototype = &#123;</span><br><span class="line">        <span class="keyword">constructor</span>: jQuery</span><br><span class="line">    &#125;</span><br><span class="line">    jQuery.prototype.init.prototype = jQuery.prototype;</span><br><span class="line">    window.jQuery = window.$ = jQuery;</span><br><span class="line">&#125;)( window );</span><br></pre></td></tr></table></figure></p><p>这可以说就是jQuery最基本的结构了</p><p>首先是最外层是用了匿名的立即执行函数来包裹以防止污染全局，至于为什么要给这个函数传递一个 window 作为参数这是因为方便代码的压缩，形参中的 window 在代码压缩之后可能就不是 window 了，为了能找到正确的window所以可以这样设置。</p><p>接下来就是名为 jQuery 的构造函数了，这也是整个 jQuery 中最为核心的一部分了，这个构造函数中包含了jQuery中的一些很重要的方法，这其中就包括<strong>创建一个jQuery对象</strong>时所用到的 <code>init()</code> 方法,你可能会奇怪为什么创建jQuery对象的会是 <code>init()</code> 方法而不是我们平时所用的 jQuery这个构造函数呢，其实我们通过源码也可以看出，<code>init()</code> 这个方法是 jQuery 构造函数中的一个方法，当我们要通过 jQuery构造函数创建一个 jQuery对象的时候向核心函数传递了需要创建的对象，但是实际上返回的是通过 <code>init()</code> 这个构造函数所创建的实例对象，再修改 init 的原型，虽然这个实例不是jQuery构造函数的实例但却有着一样的原型，而这个实例就是我们俗说的jQuery对象。这样就实现了通过jQuery构造函数中的方法创建了一个jQuery的对象。</p><p>最后再将 jQuery 和 $ 注册为全局，这样就实现了jQuery最基本的一个结构，可以在全局中使用jQuery了，我觉得这种方式是很巧妙的， 不看源码的话我是怎么都想不明白究竟是怎么回事，不过这也是可以学习的地方，理解了jQuery的源码是怎么回事，就可以自己尝试着开发一个类似的函数库了。</p><h3 id="jQuery构造函数接收不同的数据"><a href="#jQuery构造函数接收不同的数据" class="headerlink" title="jQuery构造函数接收不同的数据"></a>jQuery构造函数接收不同的数据</h3><p>经过前面代码的了解我们现在知道其实jQuery构造函数接收数据其实真正进行处理的是它里面的 init 方法，因为我们使用过jQuery所以我们知道接收不同的参数，所返回的数据也是不一样的，比如说接收一个选择器返回的就是一个jQuery对象，如果接收的是一个空字符串之类的话返回的也就是一个空的jQuery对象，我们可以来看一下究竟是怎么样返回一个jQuery对象的，可以先看看jQuery的源码：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">init: <span class="function"><span class="keyword">function</span>(<span class="params"> selector, context, rootjQuery </span>) </span>&#123;</span><br><span class="line"><span class="keyword">var</span> match, elem;</span><br><span class="line"></span><br><span class="line"><span class="comment">// HANDLE: $(""), $(null), $(undefined), $(false)</span></span><br><span class="line"><span class="keyword">if</span> ( !selector ) &#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Handle HTML strings</span></span><br><span class="line"><span class="keyword">if</span> ( <span class="keyword">typeof</span> selector === <span class="string">"string"</span> ) &#123;</span><br><span class="line"><span class="keyword">if</span> ( selector.charAt(<span class="number">0</span>) === <span class="string">"&lt;"</span> &amp;&amp; selector.charAt( selector.length - <span class="number">1</span> ) === <span class="string">"&gt;"</span> &amp;&amp; selector.length &gt;= <span class="number">3</span> ) &#123;</span><br><span class="line"><span class="comment">// Assume that strings that start and end with &lt;&gt; are HTML and skip the regex check</span></span><br><span class="line">match = [ <span class="literal">null</span>, selector, <span class="literal">null</span> ];</span><br><span class="line"></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">match = rquickExpr.exec( selector );</span><br><span class="line">&#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure></p><p>这是 init 方法中的一小部分的源码，通过这里我们可以看出这是通过if语句判断接收的是什么类型的数据从而返回符合期望的实例对象，知道了这一点我们就很好理解jQuery是如何创建一个jQuery对象的了。</p><h3 id="jQuery对象的属性与方法"><a href="#jQuery对象的属性与方法" class="headerlink" title="jQuery对象的属性与方法"></a>jQuery对象的属性与方法</h3><p>通过前面我们已经可以了解到其实jQuery对象就是通过jQuery构造函数中的 init 方法创建的一个实例，所以就很好理解了，jQuery对象所拥有的属性与方法全都是来自于jQuery构造函数的原型，通过原型机制 init 实例最终会去jQuery构造函数的原型中去找，所以就能找到所需要的属性或是方法，可以通过一张图来更加容易的理解：</p><p>想清楚来然后做出一张图出来。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>jQuery作为一款比较常用的库，理解学习其原理还是非常有必要的，对于提升自己也是非常有帮助的，可以多看看优秀的项目的源码来提升自己，学习别人的思路。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在刚开始学习jQuery的时候就很配置能写出这样的库的人，虽然我能想到jQuery是通过内部封装了大量的方法来实现函数的扩展的，当时并不了解jQuery究竟是怎样将一个dom对象处理成一个jQuery对象的，又是如何处理其他对象的，直到我阅读了jQuery的源码还有结合别人对jQuery源码的理解我才理解了jQuery的源码的机制，也不得不感叹很多地方是如此的巧妙。所以这篇文章主要讲一下jQuery的核心函数以及一些机制。虽然jQuery已经有些过时了，当时我觉得学习了解这款优秀的项目也是提升自己的一大途径。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS实现上传图片并且本地预览</title>
    <link href="https://q32757468.github.io/2019/09/15/JS%E5%AE%9E%E7%8E%B0%E4%B8%8A%E4%BC%A0%E5%9B%BE%E7%89%87%E5%B9%B6%E4%B8%94%E6%9C%AC%E5%9C%B0%E9%A2%84%E8%A7%88/"/>
    <id>https://q32757468.github.io/2019/09/15/JS实现上传图片并且本地预览/</id>
    <published>2019-09-15T07:12:15.000Z</published>
    <updated>2019-09-15T07:35:06.781Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面开发chrome插件还是遇到了挺多的困难的，其中一个就是如何将上传的图片缓存到本地，思路很简单，但是一直不知道该如何实现，现在有了办法了，主要是想通过上传图片然后通过img标签将其显示出来，再通过 localStorage 对其进行储存，这样是一个比较好的方案，我这篇文章所写的图片的预览也就是对第一步的一个实现。<br><a id="more"></a></p></blockquote><h3 id="实现思路"><a href="#实现思路" class="headerlink" title="实现思路"></a>实现思路</h3><p>其实思路还是比较简单的，我们都知道 input file 有一个 files 对象，这个对象中就保存了上传的文件的信息，我们只需要将上传的文件通过一些方法转化为 url ，然后通过 img 标签的 src 来加载它，就可以实现我们想要的功能了，这里主要通过两种不依赖后端的方式来实现。</p><h3 id="使用-FileReader"><a href="#使用-FileReader" class="headerlink" title="使用 FileReader"></a>使用 FileReader</h3><p><strong>FileReader</strong>也是 html5 的一个新的 API  ，可以通过它来处理文件：</p><p>HTML：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">class</span>=<span class="string">"uploadFile"</span> <span class="attr">name</span>=<span class="string">"test"</span> <span class="attr">id</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">""</span> <span class="attr">alt</span>=<span class="string">""</span> <span class="attr">class</span>=<span class="string">"preview"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>这里只做演示，所以代码很简单，主要就是一个上传文件的input，然后一个用来显示图片的 img 标签。</p><p>JS：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> uploadFile = $(<span class="string">'.uploadFile'</span>);</span><br><span class="line">  <span class="keyword">const</span> preview = $(<span class="string">'.preview'</span>);</span><br><span class="line">  uploadFile.change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> file = $(<span class="keyword">this</span>)[<span class="number">0</span>].files[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">let</span> fr = <span class="keyword">new</span> FileReader();</span><br><span class="line">    fr.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// 通过result属性获取到转化后的url</span></span><br><span class="line">      preview.attr(&#123; <span class="string">"src"</span>: <span class="keyword">this</span>.result &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    fr.readAsDataURL(file);<span class="comment">//将图片作为url读出提交给result</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="使用-window-URL"><a href="#使用-window-URL" class="headerlink" title="使用 window.URL"></a>使用 window.URL</h3><p>html部分的代码是一样的。</p><p>JS：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> uploadFile = $(<span class="string">'.uploadFile'</span>);</span><br><span class="line">  <span class="keyword">const</span> preview = $(<span class="string">'.preview'</span>);</span><br><span class="line">  uploadFile.change(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> file = $(<span class="keyword">this</span>)[<span class="number">0</span>].files[<span class="number">0</span>];</span><br><span class="line">    <span class="comment">//通过url对象来将图片转化为url</span></span><br><span class="line">    <span class="keyword">let</span> URL = <span class="built_in">window</span>.URL || <span class="built_in">window</span>.webkitURL;</span><br><span class="line">    <span class="keyword">let</span> imgURL = URL.createObjectURL(file);</span><br><span class="line">    preview.attr(&#123; <span class="string">"src"</span>: imgURL &#125;);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>最后可以来看一下实现之后的效果：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/xbxICjHBzOXFUs7lSMdodJbW6dD*wcK7vkOuWjf7wKQ!/b/dLgAAAAAAAAA&bo=WgMoAQAAAAADB1I!&rf=viewer_4"></p><h3 id="今天新学的一点小知识"><a href="#今天新学的一点小知识" class="headerlink" title="今天新学的一点小知识"></a>今天新学的一点小知识</h3><p>今天这里又学到一些新东西，就是event.target,这个东西和this有点像，但是又有区别，target指向的dom对象永远不会变化，而this的指向可能会因为冒泡之类的而改变.</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>其实总的来说不管是使用那种方式来实现预览图片其原理都是一样的。</p><p>区别就在于 转化为 url 时所用的方法不一样。</p><p>还有就是兼容性问题，其实都差不多，老的ie一样还是都不兼容，可能用 <strong>FileReader</strong> 会好一点。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面开发chrome插件还是遇到了挺多的困难的，其中一个就是如何将上传的图片缓存到本地，思路很简单，但是一直不知道该如何实现，现在有了办法了，主要是想通过上传图片然后通过img标签将其显示出来，再通过 localStorage 对其进行储存，这样是一个比较好的方案，我这篇文章所写的图片的预览也就是对第一步的一个实现。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS实现自定义鼠标右键菜单</title>
    <link href="https://q32757468.github.io/2019/09/12/JS%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%AE%9A%E4%B9%89%E9%BC%A0%E6%A0%87%E5%8F%B3%E9%94%AE%E8%8F%9C%E5%8D%95/"/>
    <id>https://q32757468.github.io/2019/09/12/JS实现自定义鼠标右键菜单/</id>
    <published>2019-09-12T07:27:35.000Z</published>
    <updated>2019-09-12T07:45:30.092Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;最近在我开发chrome扩展插件的过程中准备实现通过鼠标右键来打开一个菜单来添加删除导航以及修改背景图片等一系列的功能，这里来记录一下具体是如何实现这样的功能的以及注意实现。<br><a id="more"></a></p></blockquote><p>这里通过一个小demo来进行演示，整体还是挺简单的，只要注意一些细节就好了。</p><h3 id="先来看一下效果图："><a href="#先来看一下效果图：" class="headerlink" title="先来看一下效果图："></a>先来看一下效果图：</h3><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/KnKE48CSRXQlxQPSEETunFPfZa1dZW0UItDZYcYcmBE!/b/dAYBAAAAAAAA&bo=kgJQAgAAAAADB.A!&rf=viewer_4"><br>这个小的菜单框就是我自定义的鼠标右键菜单，这里没有太多的修饰，样式根据情况进行适当的调整就可以了。</p><h3 id="HTML部分代码"><a href="#HTML部分代码" class="headerlink" title="HTML部分代码"></a>HTML部分代码</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 这个box模拟页面中的一部分 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 而这个列表就是我们需要的右键菜单了 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"list"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>菜单一<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>菜单二<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>菜单三<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span>菜单四<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">  * &#123;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.box</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="comment">/* 这个菜单默认是不显示的 */</span></span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#000</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>css唯一要注意的就是默认这个菜单是不显示的。</p><h3 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里用了jQuery来写，不用也是差不多的</span></span><br><span class="line"> &lt;script src=<span class="string">"./js/jquery-3.4.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">const</span> list = $(<span class="string">'.list'</span>);</span><br><span class="line">      <span class="keyword">const</span> box = $(<span class="string">'.box'</span>);</span><br><span class="line">      <span class="comment">// 鼠标右键事件</span></span><br><span class="line">      box.contextmenu(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 在return false 之前可以写自己想要的功能的代码</span></span><br><span class="line">        e = e || <span class="built_in">window</span>.event;</span><br><span class="line">        <span class="comment">// 将菜单的位置设置为鼠标右键时的位置</span></span><br><span class="line">        list.css(&#123;</span><br><span class="line">          <span class="string">'top'</span>: e.pageY + <span class="string">'px'</span>,</span><br><span class="line">          <span class="string">'left'</span>: e.pageX + <span class="string">'px'</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">        list.show();<span class="comment">//将菜单显示出来</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//禁用了原本的鼠标右键菜单</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 单击网页任意位置使菜单隐藏</span></span><br><span class="line">      $(<span class="built_in">window</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        list.hide();</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>在注释中已经把需要注意的地方写出来了，这里在总结一下：</p><ul><li><p>contextmenu 事件是鼠标右键的事件</p></li><li><p>基本的原理就是通过鼠标右键的事件将我们自己定义的右键菜单定位到鼠标指针所在的位置，并且将其显示出来，然后鼠标左键单击时需要将这个菜单进行隐藏。</p></li><li><p>一定要将逻辑代码写在鼠标右键事件中的 <code>return false</code>之前。</p></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>鼠标右键自定义菜单本身挺简单的，这里在开发chrome插件的过程中使用到了，所以记录一下。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;最近在我开发chrome扩展插件的过程中准备实现通过鼠标右键来打开一个菜单来添加删除导航以及修改背景图片等一系列的功能，这里来记录一下具体是如何实现这样的功能的以及注意实现。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Vuex的基本使用</title>
    <link href="https://q32757468.github.io/2019/09/11/Vuex%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>https://q32757468.github.io/2019/09/11/Vuex的基本使用/</id>
    <published>2019-09-11T08:49:32.000Z</published>
    <updated>2019-09-14T08:39:43.612Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vuex作为vue全家桶之一，使用vue开发的过程中有着无可替代的作用，可以解决多个组件中传值的问题，并且本身的使用也非常的简单，有着非常强大的作用。我把它理解为一个数据共享中心，所有的组件都共享这里面的数据，并且都可以对其中的数据进行修改。来看看它是如何发挥作用的。<br><a id="more"></a></p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>首先是安装vuex，可以通过npm来安装vuex，注意，因为是生产所需要的依赖，所以需要<code>-S</code>选项：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vuex -S</span><br></pre></td></tr></table></figure></p><p>当然直接从<a href="https://vuex.vuejs.org/zh/installation.html" target="_blank" rel="noopener">官网</a>下载然后引用也是可以的。</p><h3 id="用法"><a href="#用法" class="headerlink" title="用法"></a>用法</h3><p>首先需要在项目目录下创建一个名为 <strong>store.js</strong> 的文件，这个文件就是我们vuex的主要文件，如果是在项目比较大的情况下，可以将这个文件中的各个部分单独拆分成一个文件，然后将所有的文件放在名为store的文件夹内。</p><h3 id="store-js"><a href="#store-js" class="headerlink" title="store.js"></a>store.js</h3><p>来看看<strong>store.js</strong>这个文件的基本内容及作用：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//正常的引入</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line"></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="comment">// 通过state对象来存储数据，然后可以在组件中通过this.$store.state来获取我们想要的数据</span></span><br><span class="line">  state: &#123;</span><br><span class="line">    count: <span class="number">1000</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// getters对象，这个对象和计算属性非常的像，用法也非常的像</span></span><br><span class="line">  getters: &#123;</span><br><span class="line">    countAdd1(state) &#123;</span><br><span class="line">      <span class="keyword">return</span> state.count + <span class="number">1</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//mutations是修改数据的地方，只有这里可以修改修改state中的数据</span></span><br><span class="line">  <span class="comment">// 通过mutations就像是注册了一个事件一样，但是并没有将事件应用起来，还需要通过commit来将其进行提交</span></span><br><span class="line">  mutations: &#123;</span><br><span class="line">    add1(state) &#123;<span class="comment">//可以接收第二个参数作为这个函数的额外参数，最好是用一个对象来定义</span></span><br><span class="line">      state.count++</span><br><span class="line">    &#125;,</span><br><span class="line">    redu1(state) &#123;</span><br><span class="line">      state.count--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// actions可以通过提交mutations来变更状态并且支持异步的操作</span></span><br><span class="line">  <span class="comment">//actions接收一个和当前store实例具有相同的方法和属性的 context 对象，所以可以通过 context.commit 来提交一个 mutations</span></span><br><span class="line">  actions: &#123;</span><br><span class="line">    add1(context) &#123;<span class="comment">//同样，在分发的时候也可以接收额外的参数</span></span><br><span class="line">      context.commit(<span class="string">'add1'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    redu1(context) &#123;</span><br><span class="line">      context.commit(<span class="string">'redu1'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  </span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>通过这样就相当于创建了一个数据的共享中心，然后就可以在各个组件中使用其中的数据了</p><h3 id="在组件中使用"><a href="#在组件中使用" class="headerlink" title="在组件中使用"></a>在组件中使用</h3><p>还是以这个文件为例子，来看看如何使用其中的数据：</p><h4 id="在组件中直接使用了state中的数据："><a href="#在组件中直接使用了state中的数据：" class="headerlink" title="在组件中直接使用了state中的数据："></a>在组件中直接使用了state中的数据：</h4><p>store.js：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">state: &#123;</span><br><span class="line">  count: <span class="number">1000</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>APP.vue:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;这是count的数值：&#123;&#123;<span class="keyword">this</span>.$store.state.count&#125;&#125;&lt;<span class="regexp">/p&gt;</span></span><br></pre></td></tr></table></figure></p><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/MOPKs8cQWsBGqhcFPp9FBaS4PJmKzKX2jdjDWGHzkN0!/b/dL4AAAAAAAAA&bo=FAEvAAAAAAADBxg!&rf=viewer_4"><br>可以看到，成功获取了我们想要的数值。</p><h4 id="通过-getters获得计算后的值："><a href="#通过-getters获得计算后的值：" class="headerlink" title="通过 getters获得计算后的值："></a>通过 <strong>getters</strong>获得计算后的值：</h4><p>store.js：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  countAdd1(state) &#123;</span><br><span class="line">    <span class="keyword">return</span> state.count + <span class="number">1</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>c1.vue:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是getters count+1后的数值：&#123;&#123;this.$store.getters.countAdd1&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/FO1*dV28OJjel4VR6FqH7KJVf6jBdmrgJDA540jvBTo!/b/dL4AAAAAAAAA&bo=sgFBAAAAAAADB9A!&rf=viewer_4"><br>可以看出成功获取了通过getters计算后的值，并且我这里是在另一个组件中使用的数据，从这里也可以看出vuex管理下的数据共同是十分方便的。</p><h4 id="通过-mutations-来修改数据"><a href="#通过-mutations-来修改数据" class="headerlink" title="通过 mutations 来修改数据"></a>通过 mutations 来修改数据</h4><p>前面的注释中也提到过 mutations 是修改数据的唯一途径，所有要修改state中数据的操作都必须在 <strong>mutations</strong>完成:</p><p>store.js：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  add1(state) &#123;<span class="comment">//可以接收第二个参数作为这个函数的额外参数，最好是用一个对象来定义</span></span><br><span class="line">    state.count++</span><br><span class="line">  &#125;,</span><br><span class="line">  redu1(state) &#123;</span><br><span class="line">    state.count--</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>APP.vue:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"add"</span> @<span class="attr">click</span>=<span class="string">"add1"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"redu"</span> @<span class="attr">click</span>=<span class="string">"redu1"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add1() &#123;<span class="comment">//可以接收额外的参数，推荐使用对象来传递多个参数</span></span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">"add1"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  redu1() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.commit(<span class="string">"redu1"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/Wr3laexW93nJPZyimOu.efGUQ1HBnZnuuY8cikitiBI!/b/dL8AAAAAAAAA&bo=cQFfAAAAAAADBw0!&rf=viewer_4"></p><p>可以看出可以通过 <strong>mutations</strong> 来对state中的数据进行修改，不过要使其生效必须要通过 <strong>commit</strong>使其生效，可以看出我这里使通过在组件中的methods中通过两个方法来进行提交。</p><p><strong>关于mutations要注意的几点：</strong></p><ul><li><p>mutations相当于是注册了事件一样，要生效需要提交，然后调用相应的方法</p></li><li><p>mutations 中不能写异步的任务，这点要十分的注意</p></li><li><p>mutations 中定义的方法可以接收额外的参数，并且推荐是使用对象来传递额外的多个参数，在通过<strong>commit</strong>进行提交的时候可以传递相应的参数，我这里没有使用，但是类似与这样：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">"add1"</span>,&#123;<span class="attr">count2</span>:<span class="number">999</span>&#125;);</span><br></pre></td></tr></table></figure></li></ul><h4 id="action-的使用"><a href="#action-的使用" class="headerlink" title="action 的使用"></a>action 的使用</h4><p><strong>Action</strong> 的作用与 mutations 类似，不过区别就是 Action 提交的是 mutations，而不是直接修改state中的数据，并且最终重要的是在<strong>Action 中可以进行异步的操作</strong>，这是action的使用：<br>store.js：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//actions接收一个和当前store实例具有相同的方法和属性的 context 对象，所以可以通过 context.commit 来提交一个 mutations</span></span><br><span class="line">actions: &#123;</span><br><span class="line">  add1(context) &#123;<span class="comment">//同样，在分发的时候也可以接收额外的参数</span></span><br><span class="line">    context.commit(<span class="string">'add1'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  redu1(context) &#123;</span><br><span class="line">    context.commit(<span class="string">'redu1'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>APP.vue:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"add"</span> @<span class="attr">click</span>=<span class="string">"add1"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"redu"</span> @<span class="attr">click</span>=<span class="string">"redu1"</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">methods: &#123;</span><br><span class="line">  add1() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.dispatch(<span class="string">"add1"</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  redu1() &#123;</span><br><span class="line">    <span class="keyword">this</span>.$store.dispatch(<span class="string">"redu1"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里是就没有通过 mutations 的方式来进行提交，而是通过 action 来提交 mutations ，然后通过在组件中分发 action 来实现对数据进行修改 ，这种方式实现的最终效果和上面的 mutations 演示所实现的效果是一样的，不过最大的区别就是在 action中提交 mutations 的时候是可以进行异步操作的。</p><h3 id="使用-mutations-和-action-来进行修改数据的区别"><a href="#使用-mutations-和-action-来进行修改数据的区别" class="headerlink" title="使用 mutations 和 action 来进行修改数据的区别"></a>使用 mutations 和 action 来进行修改数据的区别</h3><p>这里之所以单独提出来将是因为刚开始的时候不太清楚这两个究竟是怎么回事，现在弄明白了，所以单独详细的讲一下：</p><ul><li><p>首先就是使用步骤方面的区别，在 mutations 中定义的方法只需要在组件中通过 commit 提交就可以使用了，如果是使用 action 的话则需要先在 mutations 中定义修改数据的方法，然后在 action 中再定义方法提交 mutations 中的方法，最后需要使用的话则需要在组件中通过 dispatch 来分发 action 中定义的方法使修改生效。</p></li><li><p>再一个就是定义在 mutations 的方法不能写异步的任务，但是写在 action 中的方法则可以写异步的任务。</p></li><li><p>这里提一下 commit 和 dispatch 的区别，简单来说 commit是用来提交 mutations 中的方法的， dispatch 是用来提交 action 中的方法的，前者不支持异步，后者支持异步。</p></li></ul><p>在不需要异步任务的情况下直接使用 mutations 和使用 action的结果没有什么区别，主要区别就是在需要异步的情况下，推荐是无论什么情况都使用action来提交。</p><h3 id="使用-mapState-、mapGetters-、-mapMutations"><a href="#使用-mapState-、mapGetters-、-mapMutations" class="headerlink" title="使用 mapState 、mapGetters 、 mapMutations"></a>使用 mapState 、mapGetters 、 mapMutations</h3><p>在官方文档中者三个方法被称为辅助函数，这样理解是没有什么问题的，因为作用其实也就是使我们使用vux更加的简便，拿来看看他们究竟能起到怎么样的作用：</p><p>  如果我们<strong>不使用这些辅助函数</strong>，那么我们经常要很繁琐的书写一些代码来使用vuex，就像是这样：<br>  <figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是getters count+1后的数值：&#123;&#123;this.$store.getters.countAdd1&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>  可以看出这里通过<code>this.$store.getters</code>这么长的代码来获取数据是非常不方便的一件事情，所以就需要<strong>使用辅助函数</strong>,辅助函数的使用也是非常的简单，我们一个个来看一下（一样的还是基于前面的例子）。</p><h4 id="mapState-辅助函数"><a href="#mapState-辅助函数" class="headerlink" title="mapState 辅助函数"></a>mapState 辅助函数</h4><p>使用之前需要将其引入：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapState &#125; <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br></pre></td></tr></table></figure></p><p>在 <code>computed</code>中使用：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  <span class="comment">//这里使用了扩展运算符，将mapState返回的对象扩展到computed对象当中，以保证不会影响 computed 原本的使用。</span></span><br><span class="line">  ...mapState(&#123;</span><br><span class="line">    <span class="comment">// 第一种方式，使用箭头函数，通过mapState将state中的count映射为此组件date中的count</span></span><br><span class="line">    count: <span class="function"><span class="params">state</span> =&gt;</span> state.count</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更加简便的一种写法，与上面的作用是相同的</span></span><br><span class="line">    <span class="comment">// count: "count",</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 因为键值都是一样的，所以还可以写的更加的简单</span></span><br><span class="line">    <span class="comment">// count,</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 为了不改变this的指向，必须用常规函数</span></span><br><span class="line">    <span class="comment">// count(state) &#123;</span></span><br><span class="line">    <span class="comment">//   return state.count + this.localCount;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这里这几种写法的结果都是一样的，可以根据情况进行选择，这样使用之后的结果都是一样的。</p><p>之后就可以像使用data中的数据一样使用原本state中的数据了:<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是count的数值：&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>当页面中重复使用到同一数据的时候就可以提供很大的便利。</p><h4 id="mapState-辅助函数-1"><a href="#mapState-辅助函数-1" class="headerlink" title="mapState 辅助函数"></a>mapState 辅助函数</h4><p>使用之前需要将其引入：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters &#125; <span class="keyword">from</span> <span class="string">"vuex"</span>;</span><br></pre></td></tr></table></figure></p><p>同样也是在<code>computed</code>中使用，使用起来与 mapState 类似：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">computed: &#123;</span><br><span class="line">  ...mapGetters([<span class="string">"countAdd1"</span>]) <span class="comment">//这里是使用的数组的形式，也可以使用对来来进行重命名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>之后使用起来也就更加的简便了：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>这是getters count+1后的数值：&#123;&#123;countAdd1&#125;&#125;很棒！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="mapMutations-辅助函数"><a href="#mapMutations-辅助函数" class="headerlink" title="mapMutations  辅助函数"></a>mapMutations  辅助函数</h4><p>当我们在组件中对 mutations 进行提交的时候就可以使用 mapMutations 来进行简化。</p><p>同样使用前需进行引入：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapMutations &#125; <span class="keyword">from</span> <span class="string">'vuex'</span></span><br></pre></td></tr></table></figure></p><p>这里引用了官网的例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    ...mapMutations([</span><br><span class="line">      <span class="string">'increment'</span>, <span class="comment">// 将 `this.increment()` 映射为 `this.$store.commit('increment')`</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// `mapMutations` 也支持载荷：</span></span><br><span class="line">      <span class="string">'incrementBy'</span> <span class="comment">// 将 `this.incrementBy(amount)` 映射为 `this.$store.commit('incrementBy', amount)`</span></span><br><span class="line">    ]),</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      add: <span class="string">'increment'</span> <span class="comment">// 将 `this.add()` 映射为 `this.$store.commit('increment')`</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>之后我们在组件中使用的时候就会变得更加简便：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"add"</span> @<span class="attr">click</span>=<span class="string">"increment"</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><strong> 在大量重复使用同一数据的情况下使用辅助函数可以提供便利，所以根据情况合理使用吧！</strong></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>vuex是一个简单使用的工具，但是功能很强大，可以解决很多的问题，在适当的场景适当使用可以发挥很强作用。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Vuex作为vue全家桶之一，使用vue开发的过程中有着无可替代的作用，可以解决多个组件中传值的问题，并且本身的使用也非常的简单，有着非常强大的作用。我把它理解为一个数据共享中心，所有的组件都共享这里面的数据，并且都可以对其中的数据进行修改。来看看它是如何发挥作用的。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>sass的简单使用</title>
    <link href="https://q32757468.github.io/2019/08/29/sass%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
    <id>https://q32757468.github.io/2019/08/29/sass的简单使用/</id>
    <published>2019-08-29T08:06:02.000Z</published>
    <updated>2019-08-29T15:04:31.765Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sass是一门css的扩展性语言，起初在没有使用sass之前，我写css其实并不是一件让人很舒服的过程，因为写的过程经常要写很多重复的代码，父级选择器也要一直复制来复制去，也不是很好维护和管理，直到我认识了sass，第一次听说css扩展语言还是在bootstrap官网，看到说bootstrap4使用sass替代了less，才知道css还有扩展语言这么一回事，特别是当上手开始使用sass之后真的是会让人感觉特别的惊喜，因为写起来太舒服了。<br><a id="more"></a></p></blockquote><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><p>虽然中文文档中有安装的教程，但是还是要另外提一下，那个太久了，如果完全按照那个来的话最终是安装不了的。</p><p>sass 是基于 ruby 开发的，所以安装 sass 之前需要先安装 ruby，直接到<a href="https://rubyinstaller.org/downloads/" target="_blank" rel="noopener">官网</a>下载安装即可（记得添加进PATH）。 </p><p>通过命令行查看版本，如果出现版本信息则安装成功：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ruby -v</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ruby 2.5.5p157 (2019-03-15 revision 67260) [x64-mingw32]</span></span><br></pre></td></tr></table></figure></p><p>然后是替换gem源，换成速度更快的国内的源：<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> gem sources -l</span></span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://gems.ruby-china.org</span><br><span class="line"><span class="meta">#</span><span class="bash"> 请确保只有 gems.ruby-china.org</span></span><br></pre></td></tr></table></figure></p><blockquote><p>与中文文档有区别的也就是这里，中文文档中的国内镜像的地址已经不维护使用了，所以要用新的地址。</p></blockquote><p>然后就可以开始安装使用sass了<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gem install sass</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> gem install compass</span></span><br></pre></td></tr></table></figure></p><p>具体的使用方法可以参考<a href="https://www.sass.hk/install/" target="_blank" rel="noopener">中文网</a> ，因为通常都是在编辑器中配合插件使用，我是使用vscode配合Easy Sass插件进行自动编译，所以这里就不做过多的介绍了。</p><h3 id="sass中比较常用的一些特性"><a href="#sass中比较常用的一些特性" class="headerlink" title="sass中比较常用的一些特性"></a>sass中比较常用的一些特性</h3><p>在sass中有非常多的功能与特性，我在这里只介绍一些比较常用的特性，光是使用这些特性就已经能够使书写css样式轻松非常的多了。</p><h4 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h4><p>我之前没有接触过css的扩展语言，当我第一次接触到sass的嵌套的时候我就觉得这个太方便了，因为之前写css总要经常性的重复书写父级的选择器，这是很麻烦的一件事情，但是在sass中可以直接嵌套书写：</p><ul><li><p>在css中,我们经常需要重复写父级：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> <span class="selector-class">.left</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.main</span> <span class="selector-class">.right</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">100px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>但是在sass中，直接嵌套在其中就可以了：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  .left &#123;</span><br><span class="line">    @<span class="keyword">extend</span> .position;</span><br><span class="line">    left: $bj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    @extend .position;</span><br><span class="line">    right: $bj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>可以看出这样使非常的方便，并且我认为这不仅仅是使我们少写了很多的css重复代码，这还使我们的css结构看起来更加的清晰，子级与父级的关系一目了然，并且因为有了这样清晰的结构，所以在vscode的大纲中的结构也是一目了然，这使得后期维护变得非常的方便，再也不用担心找不到想找的样式的代码在哪里了。我觉得光这一个特性就已经使书写css的过程发生质变了。</p><p>这样嵌套生成的是后代选择器，如果要嵌套出子代选择器或者兄弟选择器只需要在前面加上相应的符号就好了：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  &gt; .left &#123;</span><br><span class="line">    @<span class="keyword">extend</span> .position;</span><br><span class="line">    left: $bj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>可以用<code>&amp;</code>替代父级，比如说用到hover的时候：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  :hover &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">aqua</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>直接这样写是不能如我们所想的那样解析的，需要像这样写，用<code>&amp;</code>代替父级：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```<span class="selector-tag">css</span></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  &amp;:hover &#123;</span><br><span class="line">    <span class="selector-tag">color</span>: <span class="selector-tag">aqua</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>可以看一下，通过查看大纲就可以很轻松的定位相应css的位置了：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/wALp2JVAFMoCH3xzdD3h5HSfGr0zJ990HHgKXQ.x3PM!/b/dFQBAAAAAAAA&bo=NgGuAAAAAAADB7s!&rf=viewer_4"></p><p>这里再提一下其实不仅仅是选择器可以进行嵌套，其实属性也是可以嵌套的，但是因为可能书写起来不是那么的方便并且使用场景也相对较少所以就不多提了。</p><h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>sass中的变量也是一个能够提升开发维护效率的一个特性，因为我们经常要对很多的选择器设置一样的属性，通常都是通过复制粘贴来实现，这不方便并且不便于维护，当要修改时全部都得改一遍十分的麻烦，通过再sass中使用变量就可以解决这个问题。</p><p>变量的使用也是十分的简单，通过<code>$</code>来设置变量名，就像这样：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$bj:100px;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.left</span> &#123;</span><br><span class="line">  @extend .position;</span><br><span class="line">  left: $bj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.right</span> &#123;</span><br><span class="line">  @extend .position;</span><br><span class="line">  right: $bj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这样只要是用到了变量的地方就都会被变量的属性值替代了，只要修改了变量，所有用到了相应变量的地方也会一起随着变化，所以这会是维护变得极其的简单。</p><p>要注意的一点是变量只在定义的相应的区域内有效，超出了范围就没有效果了。</p><h4 id="混合器"><a href="#混合器" class="headerlink" title="混合器"></a>混合器</h4><p>我的理解是混合器更像是大段的变量一样，和变量类似，可以用来设定那些会重复使用的代码片段，并且还可以传递参数用来进行细微的区分。</p><p>比如说我这里有两个小块，和一个大块，两个小块在大块中，区别就是一个在左，一个在右，剩下的都一样，这个时候我们就可以使用混合器来复用代码了:<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">//将通用的代码提取出来</span><br><span class="line">  @<span class="keyword">mixin</span> position &#123;</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">    <span class="selector-tag">top</span>: 50%;</span><br><span class="line">    <span class="selector-tag">transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-webkit-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-moz-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-ms-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-o-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">//通过@include引入</span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    @include position;</span><br><span class="line">    <span class="selector-tag">left</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    @include position;</span><br><span class="line">    <span class="selector-tag">right</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这样就实现了代码复用，对于这些公用的样式以后直接修改混合器中的内容就可以了</p><p>甚至还可以通过使用参数来进一步的简化：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  //可以通过键值对的形式来设置默认参数</span><br><span class="line">  @<span class="keyword">mixin</span> position ($l:unset, $r:unset) &#123;</span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">absolute</span>;</span><br><span class="line">    <span class="selector-tag">top</span>: 50%;</span><br><span class="line">    <span class="selector-tag">transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-webkit-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-moz-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-ms-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    <span class="selector-tag">-o-transform</span>: <span class="selector-tag">translateX</span>(<span class="selector-tag">-50</span>%);</span><br><span class="line">    left: $l;</span><br><span class="line">    right: $r;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    @include position(100px, unset);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    @include position(unset, 100px);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>可以看出通过参数就可以完成对不一样的地方进行设置。</p><p>这里再来说一下混合器的实现原理，原理其实是代码的复制，也就是将混合器中的代码复制到包含这个混合器的选择器中。缺点可能就是编译后的css文件会有比较多的代码。</p><p>来看下效果：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/uuKElZCTeEIEHbXsDovri2dHVpsxQ6Ci0bOC2rZTD.4!/b/dL4AAAAAAAAA&bo=fQcEAwAAAAADB18!&rf=viewer_4"></p><h4 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h4><p>继承的就是我们理解的那个继承，可以在一个选择其中继承另一个选择器的全部内容（包括与其相关的选择器），继承的作用与用法与混合器有些相似，但是区别在于继承的一定也是一个选择器并非一个单独的代码段，在实现的原理方面，混合器是单纯的复制代码，而继承则是复制选择器，可以将上面的例子通过继承来实现：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: antiquewhite;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line"></span><br><span class="line">  //定义一个要继承的类，相当于如果我们不使用继承，而使用两个类，那么这个就是基类</span><br><span class="line">  <span class="selector-class">.position</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="attribute">-webkit-transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="attribute">-moz-transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="attribute">-ms-transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="attribute">-o-transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  $bj:100px;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.left</span> &#123;</span><br><span class="line">    @extend .position;</span><br><span class="line">    left: $bj;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.right</span> &#123;</span><br><span class="line">    @extend .position;</span><br><span class="line">    right: $bj;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>其实相较于使用混合器，我更喜欢使用继承来实现复用，因为这样编译后的代码更加的少，但是混合器的优势也很明显，可以参数。</p><blockquote><p>你完全可以放心地继承有后代选择器修饰规则的选择器，不管后代选择器多长，但有一个前提就是，不要用后代选择器去继承。</p></blockquote><h4 id="导入样式文件"><a href="#导入样式文件" class="headerlink" title="导入样式文件"></a>导入样式文件</h4><p>css提供的导入css文件的方式速度比较慢，所以sass中还提供了一种导入sass文件的方式，当然也可以导入css文件只不过这样做的话采用的还是css的那种方式，不过其实现在都是采用打包工具进行开发在页面入口文件中导入不同的样式文件，都不会在css中去导入样式文件，不过还是要简单的提一下。</p><p>在sass中可以通过 <code>@import</code>来导入样式sass文件，并且可以不需要添加后缀名，比如<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">import</span> <span class="string">"content"</span></span><br></pre></td></tr></table></figure></p><p>也可以导入部分的sass文件，比如一个sass文件只是需要的部分代码，那么它的文件名就可以以<code>_</code>开头，这样做的话就不会被编译了，导入的时候也可以省略前面的<code>_</code>。</p><p>导入css文件的话只需要上css后缀就可以，不过这种方式还是通过css的比较慢的方式来导入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;content2.css&quot;</span><br></pre></td></tr></table></figure></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>sass有着众多强大的特性，那怕仅使用我这篇文章提到的特性都已经可以大大提升开发效率以及维护的效率了，太好用了，熟练掌握之后就可以愉快的书写样式了！</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;sass是一门css的扩展性语言，起初在没有使用sass之前，我写css其实并不是一件让人很舒服的过程，因为写的过程经常要写很多重复的代码，父级选择器也要一直复制来复制去，也不是很好维护和管理，直到我认识了sass，第一次听说css扩展语言还是在bootstrap官网，看到说bootstrap4使用sass替代了less，才知道css还有扩展语言这么一回事，特别是当上手开始使用sass之后真的是会让人感觉特别的惊喜，因为写起来太舒服了。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>webpack单页面配置与多页面配置以及各方面优化</title>
    <link href="https://q32757468.github.io/2019/08/26/webpack%E5%8D%95%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E4%B8%8E%E5%A4%9A%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E4%BB%A5%E5%8F%8A%E5%90%84%E6%96%B9%E9%9D%A2%E4%BC%98%E5%8C%96/"/>
    <id>https://q32757468.github.io/2019/08/26/webpack单页面配置与多页面配置以及各方面优化/</id>
    <published>2019-08-26T10:01:22.000Z</published>
    <updated>2019-08-27T14:33:54.979Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这几天都在琢磨着配置好webpack的多页面配置以及优化，原本只是其实配置过一份简单的版本，但是对webpack其实也不是特别的熟悉，所以这次配置多页面以及优化还是踩了不少坑的，不过总之是配置好了一份自己满意的配置，可以愉快的用webpakc来打包项目了。<br><a id="more"></a></p></blockquote><h3 id="webpack单页面配置"><a href="#webpack单页面配置" class="headerlink" title="webpack单页面配置"></a>webpack单页面配置</h3><p>其实在之前开始学习webpack的时候就已经配置好了一份简单的webpack单页面的配置，但是当时也只是简单的配置，没有考虑到性能的优化之类，所以不是特别的满意，目录结构考虑的也不是很周到，对webpack的理解也非常的浅，然后现在的这份webpack配置就是我目前很理想的配置了。</p><h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><p>可以先来看一下项目最终打包好的目录结构：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">│  package-lock.json</span><br><span class="line">│  package.json</span><br><span class="line">│  webpack.common.js</span><br><span class="line">│  webpack.dev.js</span><br><span class="line">│  webpack.prod.js</span><br><span class="line">│</span><br><span class="line">├─dist</span><br><span class="line">│  │  index.34b749f14486ceb6af7a.js</span><br><span class="line">│  │  index.html</span><br><span class="line">│  │  index9e2d405ad193f7d585f9.css</span><br><span class="line">│  │</span><br><span class="line">│  └─aseets</span><br><span class="line">│      └─images</span><br><span class="line">│              92dcab1797689d6d87ef20dd22c47be6.png</span><br><span class="line">│              a7a91ea31281adbf0ea7a3213fdd6f96.png</span><br><span class="line">│              b88a75406eaf6c2f133482b0f4b56833.png</span><br><span class="line">│              e07b8dbff850e41c69522320b0c5ea87.png</span><br><span class="line">│              fbcc569b7c705a3c80d2fa95e3a17226.png</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">    │  index.css</span><br><span class="line">    │  index.html</span><br><span class="line">    │  index.js</span><br><span class="line">    │  index.min.css</span><br><span class="line">    │  index.scss</span><br><span class="line">    │</span><br><span class="line">    └─aseets</span><br><span class="line">        ├─fonts</span><br><span class="line">        └─images</span><br><span class="line">                1.png</span><br><span class="line">                2.png</span><br><span class="line">                3.png</span><br><span class="line">                4.png</span><br><span class="line">                strawberry.png</span><br></pre></td></tr></table></figure></p><p>这个是我个人比较习惯的一个路径，在单页面的时候路径就简单的多了。</p><h4 id="配置文件详细信息"><a href="#配置文件详细信息" class="headerlink" title="配置文件详细信息"></a>配置文件详细信息</h4><p>在之前我是只是用一个配置文件的，可是后来发现开发环境和生产环境的差别确实很大，需要分别配置，这里我是使用了一款叫做<strong>webpack-merge</strong>的插件，这也是官方文档中使用的插件，需要了解详细的用法的话，也可以前往<a href="https://webpack.js.org/configuration/#use-different-config-file" target="_blank" rel="noopener">官方文档</a>进行查看。</p><p>这里通过插件将配置文件拆分成三部分，分别是公用配置、开发环境配置、生产环境配置，分别如下：</p><h5 id="webpack-common-js"><a href="#webpack-common-js" class="headerlink" title="webpack.common.js"></a>webpack.common.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置信息</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  entry: &#123;<span class="comment">// 项目入口文件</span></span><br><span class="line">    index: <span class="string">'./src/index.js'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123; <span class="comment">// 配置输出选项</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>), <span class="comment">// 配置输出的路径</span></span><br><span class="line">    <span class="comment">// filename: '[name].js', // 分别配置dev与prod</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    noParse: [<span class="regexp">/jquery/</span>, /react\.min\.js$/],  <span class="comment">//当webpack打包时忽略这些文件，因为没有采用模块化开发，同时建议通过cdn的方式来引入非模块化的文件</span></span><br><span class="line">    rules: [ <span class="comment">// 匹配规则</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配图片</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        use: [<span class="string">'url-loader?outputPath=aseets/images&amp;limit=8192&amp;name=[contenthash].[ext]&amp;fallback=file-loader'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配字体</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(ttf|eot|svg|woff|woff2)$/</span>,</span><br><span class="line">        use: [<span class="string">'file-loader?outputPath=aseets/fonts'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 抽离css并压缩</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'fast-css-loader'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sass|scss)$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'fast-css-loader'</span>, <span class="string">'fast-sass-loader'</span>]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通过externals可以检索外部依赖，而不需要本地依赖也能通过 import引用。</span></span><br><span class="line">  externals: &#123;</span><br><span class="line">    echarts: <span class="string">'echarts'</span>,</span><br><span class="line">    jquery: <span class="string">'jQuery'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//抽出第三方库文件</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    <span class="comment">// runtimeChunk: 'single',</span></span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        vendor: &#123;</span><br><span class="line">          test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          name: <span class="string">'vendors'</span>,</span><br><span class="line">          chunks: <span class="string">'all'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, <span class="string">'src/index.html'</span>),<span class="comment">//圆文件路径</span></span><br><span class="line">      filename: <span class="string">'index.html'</span><span class="comment">//自动生成的HTML文件的名称</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽离css</span></span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'[name][contenthash].css'</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">  ],</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这里的配置比较简单都是一些常用的配置及插件配置，这里需要注意的一件事就是因为在开发环境中我不需要使用到 [contenthash] 来为入口文件命名，所以<code>output.path</code>这部分我在其他两份配置文件进行了配置。</p><h5 id="webpack-dev-js"><a href="#webpack-dev-js" class="headerlink" title="webpack.dev.js"></a>webpack.dev.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.js'</span>);</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//配置信息</span></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line">  mode: <span class="string">'development'</span>,</span><br><span class="line">  output: &#123; <span class="comment">// 配置输出选项</span></span><br><span class="line">    filename: <span class="string">'[name].js'</span>, <span class="comment">// 配置输出的文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class="line">  ],</span><br><span class="line">  devServer: &#123;</span><br><span class="line">    hot: <span class="literal">true</span>,</span><br><span class="line">    open: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>开发环境需要单独配置的很少，主要就是热更新的配置。</p><h5 id="webpack-prod-js"><a href="#webpack-prod-js" class="headerlink" title="webpack.prod.js"></a>webpack.prod.js</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> merge = <span class="built_in">require</span>(<span class="string">'webpack-merge'</span>);</span><br><span class="line"><span class="keyword">const</span> common = <span class="built_in">require</span>(<span class="string">'./webpack.common.js'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">"clean-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> OptimizeCSSAssetsPlugin = <span class="built_in">require</span>(<span class="string">'optimize-css-assets-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> TerserJSPlugin = <span class="built_in">require</span>(<span class="string">'terser-webpack-plugin'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = merge(common, &#123;</span><br><span class="line"></span><br><span class="line">  mode: <span class="string">'production'</span>,</span><br><span class="line"></span><br><span class="line">  output: &#123; <span class="comment">// 配置输出选项</span></span><br><span class="line">    filename: <span class="string">'[name].[contenthash].js'</span>, <span class="comment">// 配置输出的文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 压缩js与css</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    minimizer: [</span><br><span class="line">      <span class="keyword">new</span> TerserJSPlugin(&#123;</span><br><span class="line">        cache: <span class="literal">true</span>,</span><br><span class="line">        parallel: <span class="literal">true</span>,</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> OptimizeCSSAssetsPlugin(&#123;&#125;)</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>生产环境的配置就相对多一些了，主要就是打包清理的插件以及压缩的插件。</p><p><strong>在两个环境的配置文件配置好之后就可以用起来了，这里要注意的是现在这样是不能直接拿来用的，我刚开始就是忽略了这点，想要生效还需要在打包或者通过 dev 预览的时候指定配置文件就行，我是通过pakage.script来指定的，像是这样：</strong><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "start": "webpack-dev-server --config webpack.dev.js",</span><br><span class="line">  "build": "webpack --config  webpack.prod.js"</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>单页面的配置就这样配置好了，我做的优化以及插件相关的问题我会到优化部分再说。</p><h3 id="webpack多页面配置"><a href="#webpack多页面配置" class="headerlink" title="webpack多页面配置"></a>webpack多页面配置</h3><p>上面是单页面的配置，那么我们肯定不会只进行单页面的开发，多页面的开发也是非常常见的，多页面的配置就会相比要复杂一些，因为页面更加的多。</p><h4 id="目录结构-1"><a href="#目录结构-1" class="headerlink" title="目录结构"></a>目录结构</h4><p>这是我多页面的页面结构，index.html的位置还是一样的，将其他的所有页面进一个文件夹内，css、js也是同理：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">│  package-lock.json</span><br><span class="line">│  package.json</span><br><span class="line">│  webpack.common.js</span><br><span class="line">│  webpack.dev.js</span><br><span class="line">│  webpack.prod.js</span><br><span class="line">│</span><br><span class="line">├─dist</span><br><span class="line">│  │  index.html</span><br><span class="line">│  │</span><br><span class="line">│  ├─pages</span><br><span class="line">│  │      page1.html</span><br><span class="line">│  │      page2.html</span><br><span class="line">│  │</span><br><span class="line">│  └─static</span><br><span class="line">│      └─js</span><br><span class="line">│              index.acb8d4a0a354c09aa1a5.js</span><br><span class="line">│              page1.08868399604c484bbd2a.js</span><br><span class="line">│              page2.ab4baec0ced2346793dd.js</span><br><span class="line">│</span><br><span class="line">└─src</span><br><span class="line">    │  index.html</span><br><span class="line">    │</span><br><span class="line">    ├─aseets</span><br><span class="line">    │  ├─fonts</span><br><span class="line">    │  └─images</span><br><span class="line">    │          bb.png</span><br><span class="line">    │          cm.png</span><br><span class="line">    │</span><br><span class="line">    ├─pages</span><br><span class="line">    │      page1.html</span><br><span class="line">    │      page2.html</span><br><span class="line">    │</span><br><span class="line">    └─static</span><br><span class="line">        ├─css</span><br><span class="line">        │      index.scss</span><br><span class="line">        │      page1.scss</span><br><span class="line">        │      page2.scss</span><br><span class="line">        │</span><br><span class="line">        └─js</span><br><span class="line">                index.js</span><br><span class="line">                page1.js</span><br><span class="line">                page2.js</span><br></pre></td></tr></table></figure></p><p>以上就是我多页面的配置文件，可以看出单页面与多页面在目录的结构方面差别还是很大的。</p><h4 id="配置文件详细信息-1"><a href="#配置文件详细信息-1" class="headerlink" title="配置文件详细信息"></a>配置文件详细信息</h4><h4 id="dev-和-prod"><a href="#dev-和-prod" class="headerlink" title="dev 和 prod"></a>dev 和 prod</h4><p>因为基本上没有什么太大的变化就合在一起讲一下变化吧：</p><ul><li><p>仔细一看其实没有什么大变化</p></li><li><p>唯一的变化也就是因为是多页面，所以在使用 <strong>devServer</strong> 的时候要更改一下默认的打开路径，方便管理其他页面：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  hot: <span class="literal">true</span>,</span><br><span class="line">  open: <span class="literal">true</span>,</span><br><span class="line">  openPage: <span class="string">'/pages'</span>,</span><br><span class="line">  contentBase: <span class="string">'src'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ul><h5 id="webpack-common-js-1"><a href="#webpack-common-js-1" class="headerlink" title="webpack.common.js"></a>webpack.common.js</h5><p>变化比较大的也就是这份common了，其实变化大主要是要修改多页面以及这些入口文件的输出位置。</p><p>由于页面的数量不是固定的而且我也不想每次都去修改配置文件，所以我采用了动态获取所有的页面并且将其入口文件进行打包到指定文件夹中，这样进行开发的时候就比较省事了。</p><p>这是配置文件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">'mini-css-extract-plugin'</span>);</span><br><span class="line"><span class="keyword">const</span> glob = <span class="built_in">require</span>(<span class="string">'glob'</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成所页面的入口文件</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entries</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> jsDir = path.resolve(__dirname, <span class="string">'src/static/js'</span>);</span><br><span class="line">  <span class="keyword">const</span> entryFiles = glob.sync(jsDir + <span class="string">'/*.js'</span>);</span><br><span class="line">  <span class="keyword">let</span> map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; entryFiles.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> filePath = entryFiles[i];</span><br><span class="line">    <span class="keyword">let</span> filename = filePath.substring(filePath.lastIndexOf(<span class="string">'\/'</span>) + <span class="number">1</span>, filePath.lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    map[filename] = filePath;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//生成pages中的所有htmlWebpackPlugin的配置信息</span></span><br><span class="line"><span class="keyword">let</span> pluginarr = [];</span><br><span class="line"><span class="keyword">let</span> HWP = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> conf, filename;</span><br><span class="line">  <span class="keyword">const</span> htmlDir = path.resolve(__dirname, <span class="string">'src/pages'</span>);</span><br><span class="line">  <span class="keyword">const</span> htmlFiles = glob.sync(htmlDir + <span class="string">'/*.html'</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; htmlFiles.length; i++) &#123;</span><br><span class="line">    filename = htmlFiles[i].substring(htmlFiles[i].lastIndexOf(<span class="string">'\/'</span>) + <span class="number">1</span>, htmlFiles[i].lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    conf = &#123;</span><br><span class="line">      template: path.resolve(__dirname, <span class="string">'src/pages/'</span> + filename + <span class="string">'.html'</span>),<span class="comment">//圆文件路径</span></span><br><span class="line">      filename: path.resolve(__dirname, <span class="string">'dist/pages/'</span> + filename + <span class="string">'.html'</span>),<span class="comment">//自动生成的HTML文件的名称</span></span><br><span class="line">      title: filename,</span><br><span class="line">      chunks: [filename],</span><br><span class="line">    &#125;</span><br><span class="line">    pluginarr.push(<span class="keyword">new</span> htmlWebpackPlugin(conf));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">HWP();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//配置信息</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line"></span><br><span class="line">  entry: entries(),</span><br><span class="line">  output: &#123; <span class="comment">// 配置输出选项</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist/static/js'</span>), <span class="comment">// 配置输出的路径</span></span><br><span class="line">    <span class="comment">// filename: '[name].js', // 分别配置dev与prod</span></span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    noParse: [<span class="regexp">/jquery/</span>, /react\.min\.js$/],  <span class="comment">//当webpack打包时忽略这些文件，因为没有采用模块化开发，同时建议通过cdn的方式来引入非模块化的文件</span></span><br><span class="line">    rules: [ <span class="comment">// 匹配规则</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配图片</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">        use: [<span class="string">'url-loader?outputPath=aseets/images&amp;limit=8192&amp;name=[contenthash].[ext]&amp;fallback=file-loader'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">//匹配字体</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(ttf|eot|svg|woff|woff2)$/</span>,</span><br><span class="line">        use: [<span class="string">'file-loader?outputPath=fonts'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 抽离css并压缩</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'fast-css-loader'</span>]</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(sass|scss)$/</span>,</span><br><span class="line">        use: [MiniCssExtractPlugin.loader, <span class="string">'fast-css-loader'</span>, <span class="string">'fast-sass-loader'</span>]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 通过externals可以检索外部依赖，而不需要本地依赖也能通过 import引用。</span></span><br><span class="line">  externals: &#123;</span><br><span class="line">    echarts: <span class="string">'echarts'</span>,</span><br><span class="line">    jquery: <span class="string">'jQuery'</span>,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  <span class="comment">//抽出第三方库文件</span></span><br><span class="line">  optimization: &#123;</span><br><span class="line">    <span class="comment">// runtimeChunk: 'single',</span></span><br><span class="line">    splitChunks: &#123;</span><br><span class="line">      cacheGroups: &#123;</span><br><span class="line">        vendor: &#123;</span><br><span class="line">          test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">          name: <span class="string">'vendors'</span>,</span><br><span class="line">          chunks: <span class="string">'all'</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  plugins: [</span><br><span class="line"></span><br><span class="line">    <span class="keyword">new</span> htmlWebpackPlugin(&#123;</span><br><span class="line">      template: path.resolve(__dirname, <span class="string">'src/index.html'</span>),<span class="comment">//圆文件路径</span></span><br><span class="line">      filename: path.resolve(__dirname, <span class="string">'dist/index.html'</span>),<span class="comment">//自动生成的HTML文件的名称</span></span><br><span class="line">      title: <span class="string">'index'</span>,</span><br><span class="line">      chunks: [<span class="string">'index'</span>],</span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">    ...pluginarr,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 抽离css</span></span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">'[name][contenthash].css'</span></span><br><span class="line">    &#125;),</span><br><span class="line"></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>这里说一下我在写这些配置的时候遇到的一些困难：</p><ul><li>首先是因为对node.js不了解，所以在参照别人进行动态的获取指定文件夹内的所有文件的文件名的时候遇到了一些困难，然后编写函数的时候也会困难一些，因为不知道那些node中的函数是什么意思，后来把这些不认识的node函数都查了一遍就理解了，从而实现了遍历所有的入口文件，也就是这部分：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">entries</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> jsDir = path.resolve(__dirname, <span class="string">'src/static/js'</span>);</span><br><span class="line">  <span class="keyword">const</span> entryFiles = glob.sync(jsDir + <span class="string">'/*.js'</span>);</span><br><span class="line">  <span class="keyword">let</span> map = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; entryFiles.length; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> filePath = entryFiles[i];</span><br><span class="line">    <span class="keyword">let</span> filename = filePath.substring(filePath.lastIndexOf(<span class="string">'\/'</span>) + <span class="number">1</span>, filePath.lastIndexOf(<span class="string">'.'</span>));</span><br><span class="line">    map[filename] = filePath;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//然后将函数返回的对象传递给entry就行了。</span></span><br><span class="line">entry: entries(),</span><br></pre></td></tr></table></figure></li></ul><p>动态配置<code>htmlWebpackPlugin</code>也是类似，不过会稍微麻烦一点，原理是一样的。</p><ul><li><p>遇到的第二个比较大的困难就是网上的资料不是特别的齐全与准确，也花费了我比较多的时间<br>首先是因为不了解node，所以不知道还需要先安装<code>glob</code>这个模块才能使用，一开始还以为是自带的不用安装，然后就是参照别人的动态配置<code>htmlWebpackPlugin</code>的函数，然后写了自己的函数，但是花了很多的时间总是的不到我想要的效果，最后发现最坑的是在有一处需要写<code>htmlWebpackPlugin</code>这段代码，我肯定是选择复制一下会更加的方便，结果我从别人的代码里复制，结果复制来的是<code>HtmlWebpackPlugin</code>,可能很多人这样看都没有看出什么问题，我一开始也没意识到问题的严重性，但是又总是报错<code>HtmlWebpackPlugin</code>没有定义，我心里那个气啊，不是定义了吗？怎么就没定义了，知道后来我发现我的代码里面怎么有一个叛徒<code>HtmlWebpackPlugin</code>???，这个开头的字母错了啊，我的天啊，困扰我这么久的竟然是这个问题，我竟然复制的别人的是错了，我真不明白那个老哥的配置是怎么生效的，我崩溃啊，好在问题解决了。</p></li><li><p>后来又遇到的一个比较严重的问题就是对node中的<code>__dirname</code>理解的不对，这导致我在截取不带后缀的文件名的时候出现了问题，后面意识到了问题，进行了改正。</p></li><li><p>还有一个不够细心造成的问题，在配置没有完全配置好之前我进行了一次测试性的打包，导致将 index.html 打包进了 src 目录中，这不是问题的重点，重点是，这个文件中注入了三个入口js，所以导致我在后面打包的时候无论怎么修改配置，想尽办法，打包出来的 index.html 都会带有四个入口文件，我实在是没想明白怎么回事，头疼，后面经过排查，最终排查到src下的index.html，最终发现了问题。</p></li></ul><h3 id="webpack优化"><a href="#webpack优化" class="headerlink" title="webpack优化"></a>webpack优化</h3><p>前面只是展示了一下单页面与多页面的配置，插件具体的作用以及我所作的优化都没有详细进行介绍，这里来专门讲一下我在webpack的打包与代码质量方面所做的优化。我将这些优化分为两部分，一是优化之后提高打包速度，二是优化之后提升用户体验。</p><h4 id="提升打包速度"><a href="#提升打包速度" class="headerlink" title="提升打包速度"></a>提升打包速度</h4><h4 id="缩小webpack打包时的解析范围"><a href="#缩小webpack打包时的解析范围" class="headerlink" title="缩小webpack打包时的解析范围"></a>缩小webpack打包时的解析范围</h4><p>对于那些非模块化开发的库文件可以通过 module.noParse 字段来将其排除在webpack的解析范围之外。像是jQuery和echarts这种，因为这些本身就是非模块化开发的，所以没必要浪费资源进行解析。我的配置文件是这样设置的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">noParse: [<span class="regexp">/jquery/</span>, /react\.min\.js$/],</span><br></pre></td></tr></table></figure></p><p>其实除了这样处理可以缩小解析范围，大部分loader也可以通过配置来缩小解析范围。</p><h4 id="使用速度跟快的loader"><a href="#使用速度跟快的loader" class="headerlink" title="使用速度跟快的loader"></a>使用速度跟快的loader</h4><p>部分官方loader有时存在bug的，并且速度也不是最快的，这里我使用了两款关于css的loader，分别时 fast-css-loader 以及 fast-sass-loader ，使用方法基本上和普通版是一样的，详细的使用办法可以看这篇<a href="https://segmentfault.com/a/1190000014740483" target="_blank" rel="noopener">文章</a></p><h4 id="使用happypack"><a href="#使用happypack" class="headerlink" title="使用happypack"></a>使用happypack</h4><p>webpack原本的打包过程是单线程的，通过这款插件可以使各loader的打包过程变为多线程的，其实我的配置文件中并没有使用它，因为对 file-loader 和 url-loader 支持的不好，而且我还使用了抽离css的插件导致css-loader也不支持了，也就babel-loader有用了，但是我基本上不写需要balel的代码，用不到，所以就不做过多介绍了。</p><h4 id="提升用户体验"><a href="#提升用户体验" class="headerlink" title="提升用户体验"></a>提升用户体验</h4><h4 id="使用cdn"><a href="#使用cdn" class="headerlink" title="使用cdn"></a>使用cdn</h4><p>通过将静态资源（除了html文件）存放到cdn中并且开启缓存来对资源的加载进行加速。这里要注意的必须是文件名带上内容计算出的hash，不能能直接使用hash来进行缓存，一定要使用内容计算出的hash，也就是 contenthash 来进行缓存（通过看我的配置文件可以看出我是使用了contenthash），因为如果直接使用hash的话就会导致每次打包的时候所有文件都会重新生成hash，那么这样生成的hash就没有意义了。</p><h4 id="非模块化库使用cdn"><a href="#非模块化库使用cdn" class="headerlink" title="非模块化库使用cdn"></a>非模块化库使用cdn</h4><p>如果没有选择将大部分资源放到cdn中的话，对于那些非模块话开发的库文件，可以通过cdn来将其引入，这样可以减少打包后的体积，并且也可以使这些文件的加载速度变快（这样处理之后其实也就没必要骗用到上面的优化办法了，也看具体情况吧）。</p><p>这里再补充一下如果这时还需要通过引入模块的方式来引入这些通过cdn引入的文件的话该怎么办，可以通过 module.externals 来解决，像是我这样：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">externals: &#123;</span><br><span class="line">  echarts: <span class="string">'echarts'</span>,</span><br><span class="line">  jquery: <span class="string">'jQuery'</span>,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>属性名 jquery是表示  import $ from ‘jquery’  应该排除jquery模块,而属性值jQuery 表示将检索一个 jQuery 来当作全局变量。这样就可以通过引入模块的方式来继续使用这些库了。</p><h4 id="抽离css"><a href="#抽离css" class="headerlink" title="抽离css"></a>抽离css</h4><p>抽离的好处不用注入样式，减少性能开销，可以对样式进行压缩，减少代码大小。</p><p>可以通过  mini-css-extract-plugin 插件来实现，可以参考我的配置文件中的关于  mini-css-extract-plugin 插件的配置信息。</p><p>抽离之后记得取消使用 style-loader 。</p><h4 id="压缩代码"><a href="#压缩代码" class="headerlink" title="压缩代码"></a>压缩代码</h4><p>我使用的是webpack4.x的版本，已经是默认再生产模式下是自动压缩js与css文件了。</p><p>但是这里还是要提一下如何手动配置对js或者是css文件进行压缩，我这里是配置了的，我为什么要配置呢，其实主要是因为我在前面提到了我是使用了 fast-css-loader 的，使用这个的话是默认没有压缩功能的，是的，只有官方的 css-loader才有压缩的功能，那我们手动配置的话只需要使用 OptimizeCSSAssetsPlugin 这个插件，具体的配置方法也可以参考我的配置文件。</p><p>还要注意的是如果使用了这个插件进行css代码的压缩，那么js文件的压缩功能会被顶掉，所以我们就还需要安装插件进行js文件的压缩，我这里使用的是 TerserJSPlugin 使用方法参考我的配置文件。也有其他的压缩插件，这里就不介绍了。</p><p>当然，如果不使用fast-css-loader就不必要使用额外的压缩插件，具体怎么选择就仁者见仁了。</p><h4 id="使用url-loader"><a href="#使用url-loader" class="headerlink" title="使用url-loader"></a>使用url-loader</h4><p>对于图片的处理来说配置url-loader也有一定的提升，url-loader相较于file-loader来说比较明显的区别就在于可以将图片转化为base64格式的。</p><p>这里要注意的是通过base64的转化，图片的大小会增加三分之一左右，但是可以减少一次网络请求，所以设置将多大的图片转化为base64就尤为重要了：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">  test: <span class="regexp">/\.(png|jpg|gif)$/</span>,</span><br><span class="line">  use: [<span class="string">'url-loader?outputPath=aseets/images&amp;limit=8192&amp;name=[contenthash].[ext]&amp;fallback=file-loader'</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p>我这里设置的是将小于8192比特的图片转化为base64，也可以根据项目情况进行调整。大于这个数值的默认就会调用file-loader来进行处理。</p><h4 id="懒加载"><a href="#懒加载" class="headerlink" title="懒加载"></a>懒加载</h4><p>懒加载就是在用户需要时再按需引入相应的模块，这样可以减少首次加载的时间，合理的使用资源，具体可以看webpack官方文档的简单的<a href="https://webpack.js.org/guides/lazy-loading/" target="_blank" rel="noopener">例子</a>。</p><h4 id="多页面抽离公共代码"><a href="#多页面抽离公共代码" class="headerlink" title="多页面抽离公共代码"></a>多页面抽离公共代码</h4><p>在webpack4.x中不再需要特别区配置这部分的东西了，因为自带了这方面的插件并且使用默认配置也是足够的，如果要看具体怎么配置的话也可以看<a href="https://webpack.js.org/configuration/optimization/" target="_blank" rel="noopener">官方文档</a>的介绍。</p><p>原理就是多页面中会有很多重复用到的代码，比如说第三方库之类的，这类资源基本上不会被修改，所以可以把这些相同的代码抽离出来，当用户第一次请求这些公共部分的文件时，就会被浏览器缓存，当其他页面要使用的时候就不需要再次进行请求了，直接使用缓存就可以了。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>从网上找各种资料到引用到配置适合自己的配置这个过程还是花了很多的时间的，也踩了很多的坑，但是终究还是配置好了，也让我对webpack有了更多的认识，也更加的发觉了使用webpack的好处，我将会把这两份代码配置放到github中，要使用的时候直接clone下来就好了，特别是再给命令起个别名，用起来就很舒服了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;这几天都在琢磨着配置好webpack的多页面配置以及优化，原本只是其实配置过一份简单的版本，但是对webpack其实也不是特别的熟悉，所以这次配置多页面以及优化还是踩了不少坑的，不过总之是配置好了一份自己满意的配置，可以愉快的用webpakc来打包项目了。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>测试文章</title>
    <link href="https://q32757468.github.io/2019/08/14/%E6%B5%8B%E8%AF%95%E6%96%87%E7%AB%A0/"/>
    <id>https://q32757468.github.io/2019/08/14/测试文章/</id>
    <published>2019-08-14T10:20:05.000Z</published>
    <updated>2019-08-14T10:25:43.370Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;现在来测试一下图片。<br><a id="more"></a></p></blockquote><p>###<br><img src="/images/lm.jpg"></p><p>### </p><p>###</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;现在来测试一下图片。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS鼠标滚轮事件</title>
    <link href="https://q32757468.github.io/2019/08/13/JS%E9%BC%A0%E6%A0%87%E6%BB%9A%E8%BD%AE%E4%BA%8B%E4%BB%B6/"/>
    <id>https://q32757468.github.io/2019/08/13/JS鼠标滚轮事件/</id>
    <published>2019-08-13T13:16:11.000Z</published>
    <updated>2019-08-13T13:58:54.034Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们经常会有需求需要实现可以通过鼠标滚轮来进行翻页或者是对应用的切换，那么这个时候就需要用到鼠标滚轮事件了，并且大部分时候都需要进行一定的优化以提升用户体验，这也是我在这段时间开发chrome插件时所遇到的一些问题，来看看我是怎么解决的。<br><a id="more"></a></p></blockquote><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><p>鼠标滚轮事件相较于其他基本的事件使用起来会稍微麻烦那么一点点，我这里采用的jQuery的写法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 因为firefox浏览器对于鼠标滚轮事件的处理和其他浏览器不太一样，所以这里要注意兼容处理</span></span><br><span class="line">$(<span class="built_in">document</span>).on(<span class="string">'mousewheel DOMMouseScroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">  e = e || <span class="built_in">window</span>.event;</span><br><span class="line">  <span class="keyword">let</span> delta = e.originalEvent.wheelDelta || e.originalEvent.detail; <span class="comment">//后者是对Firefox的兼容</span></span><br><span class="line">  <span class="keyword">if</span> (delta &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">  <span class="comment">// 这里写滚轮上滚时的代码</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'上滚'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123;</span><br><span class="line">  <span class="comment">// 这里写滚轮下滚时的代码</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'下滚'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><p>这就是最简单的使用方式了。但是如果我们直接这样使用的话会出现一个问题，那就是当我们快速的滚动多次鼠标滚轮，那么此时就会触发多次的事件，其实这个时候用户体验是很不好的，因为大部分人都会习惯滑鼠标滚轮不止一格，并且有些鼠标也不好控制轻轻的只划一格，那么这个时候就需要进行一定的优化来解决这个问题了。</p><h3 id="优化方式一"><a href="#优化方式一" class="headerlink" title="优化方式一"></a>优化方式一</h3><p>方式一的优化原理就是在一次鼠标滚轮事件之后将滚轮事件与元素解绑，然后用定时器来设置一定时间后再次进行绑定：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDiff</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">'mousewheel DOMMouseScroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    e = e || <span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">let</span> delta = e.originalEvent.wheelDelta || e.originalEvent.detail;</span><br><span class="line">    $(<span class="built_in">document</span>).off(<span class="string">"mousewheel DOMMouseScroll"</span>);</span><br><span class="line">    <span class="keyword">if</span> (delta &gt; <span class="number">0</span>) &#123; <span class="comment">//当滑轮向上滚动时  </span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'上滚'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123; <span class="comment">//当滑轮向下滚动时  </span></span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'下滚'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(setDiff, <span class="number">500</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">setDiff();</span><br></pre></td></tr></table></figure></p><p>当这样优化之后，无论怎么样的滚动鼠标滚轮，两次滚轮事件之间最少都要间隔 500ms 了。</p><p>虽然这样的方式是可行的，但是也存在着极端的情况，加入用户进行了一次超级长的鼠标滚轮，那么就可能触发多次滚轮事件，而我在开发chrome插件的时候预期想要的效果是在一次连续的滚动过程中，无论连续滚动了多长时间，只有第一次滚轮事件会生效，后面的都会无效，因为如果实现这样的效果就无需设置时间来控制事件的触发频率，大大的增加灵活性。后面经过思考与尝试，我还是实现了我的思路。</p><h3 id="优化方式二"><a href="#优化方式二" class="headerlink" title="优化方式二"></a>优化方式二</h3><p>为了实现前面所提到的效果最终我想到可以通过判断两次事件触发的间隔来确定是否要执行事件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">setDiff</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> preTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  $(<span class="built_in">document</span>).on(<span class="string">'mousewheel DOMMouseScroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> diff = (<span class="keyword">new</span> <span class="built_in">Date</span>()) - preTime;</span><br><span class="line">    <span class="keyword">if</span> (diff &gt; <span class="number">300</span>) &#123;</span><br><span class="line">      e = e || <span class="built_in">window</span>.event;</span><br><span class="line">      <span class="keyword">let</span> delta = e.originalEvent.wheelDelta || e.originalEvent.detail;  <span class="comment">//后者Firefox</span></span><br><span class="line">      <span class="comment">// $(document).off("mousewheel DOMMouseScroll");</span></span><br><span class="line">      <span class="keyword">if</span> (delta &gt; <span class="number">0</span>) &#123; <span class="comment">//当滑轮向上滚动时  </span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'上滚'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (delta &lt; <span class="number">0</span>) &#123; <span class="comment">//当滑轮向下滚动时  </span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'下滚'</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    preTime = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line">setDiff();</span><br></pre></td></tr></table></figure></p><p>这样优化之后，只要是连续的滚动鼠标滚轮，那么一定只会触发第一次事件，当用户松开滚轮，进行下一次滚动时，间隔时间够长，就又可以触发一次滚轮事件，但是后面连续的所有事件因为间隔时间十分之短，就不会被触发，就达到了我的目的。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这也是我第一次使用鼠标的滚轮事件，结合网上的一些内容以及自己的一些思考，最终还是完成了自己的需求，并且对代码进行了简化，虽然花了一些时间，但是肯定是值得的。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;我们经常会有需求需要实现可以通过鼠标滚轮来进行翻页或者是对应用的切换，那么这个时候就需要用到鼠标滚轮事件了，并且大部分时候都需要进行一定的优化以提升用户体验，这也是我在这段时间开发chrome插件时所遇到的一些问题，来看看我是怎么解决的。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>通过百度API添加搜索小功能</title>
    <link href="https://q32757468.github.io/2019/08/10/%E9%80%9A%E8%BF%87%E7%99%BE%E5%BA%A6API%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%B0%8F%E5%8A%9F%E8%83%BD/"/>
    <id>https://q32757468.github.io/2019/08/10/通过百度API添加搜索小功能/</id>
    <published>2019-08-10T13:34:07.000Z</published>
    <updated>2019-08-11T11:14:09.375Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;这两天在开发一个自己的chrome插件，实现自定义新标签页，那么新标签页肯定少不了搜索的功能，因为我比较常用的搜索引擎是百度，所以会跳到百度的搜索结果，并且通过调用API来实现有一个提示的小窗口，原理是挺简单的，但是写的过程中还是遇到一些问题，记录一下。<br><a id="more"></a></p></blockquote><h3 id="先来看看效果图"><a href="#先来看看效果图" class="headerlink" title="先来看看效果图"></a>先来看看效果图</h3><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/8oA8YneY5riROKOZYZesXy7dwsX0xuZjTV4mpHJGPYk!/b/dFEBAAAAAAAA&bo=DwaIAwAAAAADB6A!&rf=viewer_4"><br>做的不是很好看，因为目前只是把功能实现了，样式都还是测试用的。重点来讲讲功能。</p><h3 id="实现代码"><a href="#实现代码" class="headerlink" title="实现代码"></a>实现代码</h3><h4 id="HTML代码"><a href="#HTML代码" class="headerlink" title="HTML代码"></a>HTML代码</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"main"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"centerBox"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"log"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"searchWrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">svg</span> <span class="attr">class</span>=<span class="string">"icon sousuo"</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">use</span> <span class="attr">xlink:href</span>=<span class="string">"#icon-sousuo"</span>&gt;</span><span class="tag">&lt;/<span class="name">use</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">svg</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"searchInput"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"searchTips"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="JS代码："><a href="#JS代码：" class="headerlink" title="JS代码："></a>JS代码：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./asset/font/iconfont.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> &lt;script src=<span class="string">"./asset/js/jquery-3.4.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> &lt;script&gt;</span><br><span class="line">   $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">     <span class="comment">// 百度搜索</span></span><br><span class="line">     &#123;</span><br><span class="line">       <span class="comment">// 搜索部分</span></span><br><span class="line">       <span class="keyword">const</span> searchInput = $(<span class="string">'.searchInput'</span>);</span><br><span class="line">       <span class="keyword">const</span> searchTips = $(<span class="string">'.searchTips'</span>);</span><br><span class="line">       <span class="keyword">let</span> tipItems = searchTips.children();</span><br><span class="line">       <span class="keyword">let</span> liList = <span class="string">``</span>;</span><br><span class="line">       <span class="keyword">let</span> query = searchInput.val();</span><br><span class="line">       <span class="keyword">let</span> timer;</span><br><span class="line">       <span class="keyword">let</span> tipIndex = <span class="number">-1</span>;</span><br><span class="line">       searchInput.keyup(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">         <span class="comment">// 按下回车进行搜索</span></span><br><span class="line">         <span class="keyword">if</span> (e.keyCode == <span class="number">13</span>) &#123;</span><br><span class="line">           query = $(<span class="keyword">this</span>).val();</span><br><span class="line">           <span class="built_in">window</span>.open(<span class="string">`https://www.baidu.com/s?ie=UTF-8&amp;wd=<span class="subst">$&#123;query&#125;</span>`</span>);</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 提示部分</span></span><br><span class="line">       searchInput.on(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">         tipIndex = <span class="number">-1</span>;</span><br><span class="line">         <span class="keyword">let</span> query = searchInput.val();</span><br><span class="line">         <span class="keyword">const</span> url = <span class="string">"https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su?wd="</span> + query + <span class="string">"&amp;cb=?"</span>;</span><br><span class="line">         $.getJSON(url, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">           <span class="built_in">console</span>.log(data.s);</span><br><span class="line">           data.s.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">             liList += <span class="string">`&lt;li&gt;<span class="subst">$&#123;item&#125;</span>&lt;/li&gt;`</span>;</span><br><span class="line">           &#125;);</span><br><span class="line">           searchTips.html(liList);</span><br><span class="line">           liList = <span class="string">``</span>;</span><br><span class="line">           tipItems = searchTips.children();</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 单击提示进行搜索</span></span><br><span class="line">           tipItems.each(<span class="function">(<span class="params">index, item</span>) =&gt;</span> &#123;</span><br><span class="line">             $(item).mousedown(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">               <span class="built_in">window</span>.open(<span class="string">`https://www.baidu.com/s?ie=UTF-8&amp;wd=<span class="subst">$&#123;$(<span class="keyword">this</span>).text()&#125;</span>`</span>);</span><br><span class="line">             &#125;)</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 鼠标经过时的变化</span></span><br><span class="line">           tipItems.each(<span class="function">(<span class="params">index, item</span>) =&gt;</span> &#123;</span><br><span class="line">             $(item).hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">               searchTips.show();</span><br><span class="line">               $(<span class="keyword">this</span>).addClass(<span class="string">'tipCur'</span>).siblings().removeClass(<span class="string">'tipCur'</span>);</span><br><span class="line">             &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">               $(<span class="keyword">this</span>).removeClass</span><br><span class="line">                 (<span class="string">'tipCur'</span>).siblings().removeClass(<span class="string">'tipCur'</span>);</span><br><span class="line">             &#125;)</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">           <span class="comment">// 搜索框失去焦点时隐藏，获得焦点时显示</span></span><br><span class="line">           searchInput.blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">             searchTips.hide();</span><br><span class="line">           &#125;)</span><br><span class="line">           searchInput.focus(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">             searchTips.show();</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">         &#125;)</span><br><span class="line"></span><br><span class="line">       &#125;)</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 通过上下箭头来控制搜索框内容</span></span><br><span class="line">       searchInput.keydown(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">         <span class="comment">// 方向键下</span></span><br><span class="line">         <span class="keyword">if</span> (e.keyCode == <span class="number">40</span>) &#123;</span><br><span class="line">           tipIndex++;</span><br><span class="line">           <span class="keyword">if</span> (tipIndex &gt;= tipItems.length) &#123;</span><br><span class="line">             tipIndex = <span class="number">0</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           tipItems.eq(tipIndex).addClass(<span class="string">'tipCur'</span>).siblings().removeClass(<span class="string">'tipCur'</span>);</span><br><span class="line">           searchInput.val(tipItems.eq(tipIndex).text());</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="comment">// 方向键上</span></span><br><span class="line">         <span class="keyword">if</span> (e.keyCode == <span class="number">38</span>) &#123;</span><br><span class="line">           <span class="comment">// 要阻止方向键上光标跳到文字开头的默认行为，必须要在keydown阶段阻止</span></span><br><span class="line">           e.preventDefault();</span><br><span class="line">           tipIndex--;</span><br><span class="line">           <span class="keyword">if</span> (tipIndex &lt;= (<span class="number">-1</span>)) &#123;</span><br><span class="line">             tipIndex = (tipItems.length - <span class="number">1</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           tipItems.eq(tipIndex).addClass(<span class="string">'tipCur'</span>).siblings().removeClass(<span class="string">'tipCur'</span>);</span><br><span class="line">           searchInput.val(tipItems.eq(tipIndex).text());</span><br><span class="line">         &#125;</span><br><span class="line">       &#125;)</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;)</span><br><span class="line"> &lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>这里主要讲一下这些功能的实现原理：</p><ul><li><p>使用百度进行跳转搜索<br>通过给百度的url传递 wd 字段的参数就可以跳转到相应的搜索结果，就像我上面写的那样。我这里通过open方法来跳转的目的是为了在新窗口中打开。但是有一点不好的是可能会被浏览器拦截，不过这是我自用的插件所以没影响。</p></li><li><p>关键字提示窗口<br>这里实现这个提示窗口主要是用到了jsonp向相应的API发起跨域请求（如上面代码所示），然后就可以拿到相应的数据。</p></li><li><p>单击提示进行搜索<br>这个其实就是在拿到数据并且添加进HTML中后对每条数据进行遍历，绑定一个单击事件，单击进行相应的跳转就可以了。</p></li></ul><blockquote><p>大部分代码都是很好理解的，这里就不做过多的解释了</p></blockquote><h4 id="CSS代码："><a href="#CSS代码：" class="headerlink" title="CSS代码："></a>CSS代码：</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>,</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">vertical-align</span>: -<span class="number">0.15em</span>;</span><br><span class="line">  <span class="attribute">fill</span>: currentColor;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.icon</span><span class="selector-class">.sousuo</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12.5px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.main</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"./asset/images/bg.jpeg"</span>) center center / cover no-repeat;</span><br><span class="line">  <span class="comment">/* height: 700px; */</span></span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.centerBox</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">20%</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.log</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: orange;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchWrap</span> &#123;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">600px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.8);</span><br><span class="line">  <span class="attribute">align-items</span>: center;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">45px</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchInput</span> &#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">2px</span>;</span><br><span class="line">  <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0, 0, 0, 0);</span><br><span class="line">  <span class="attribute">outline</span>: none;</span><br><span class="line">  <span class="attribute">border</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchTips</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">98%</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(255, 255, 255, 0.9);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.searchTips</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.tipCur</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(0, 0, 0, 1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>样式这里可以讲的一点就是如何使一个dom元素沾满整个屏幕：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">html,</span><br><span class="line">body &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">  .main &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>主要就是通过这些代码来实现，也非常好理解。</p><h3 id="开发过程中我遇到的一些问题以及解决办法"><a href="#开发过程中我遇到的一些问题以及解决办法" class="headerlink" title="开发过程中我遇到的一些问题以及解决办法"></a>开发过程中我遇到的一些问题以及解决办法</h3><h4 id="click-和-blur-事件的冲突"><a href="#click-和-blur-事件的冲突" class="headerlink" title="click 和 blur  事件的冲突"></a><strong>click</strong> 和 <strong>blur</strong>  事件的冲突</h4><p>  起初当我基本上完成大部分功能的之后进行测试，发现当点击提示框中的内容的时候竟然没有进行跳转，而是直接执行了失焦事件中的隐藏提示框的代码。我就猜想应该是由于单击的时候会使文本框失焦，并且 blur 会在 click 之前触发，进行一些尝试之后还是没有解决问题，后来百度了一下找到了解决问题的两种办法：</p><ol><li><p>第一种就是通过设置定时器，通过设置<code>setTimeout</code>来使 blur 事件中的代码晚一些执行：</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">searchInput.blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    searchTips.hide();</span><br><span class="line">  &#125;, <span class="number">300</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p> 但是这种办法的缺点也很明显，就是延迟的时间要足够长，起码要长到 click 事件的代码执行完毕，我这里测试大概最少300ms,所以在执行 blur 事件的时候能感觉到很明显的延迟，体验并不是很好。</p></li><li><p>第二种就是使用 <strong>mousedown</strong>事件来替代 click 事件：<br> 我这里采用的就是这种方式，这种方式就很好的解决了问题，但是也不是没有缺点， mousedown 事件在鼠标按下时就会触发，所以触发次数也就和按下的事件有关系，如果只是快速的按一下那么没有区别，但是按久了就会触发非常多次，所以很多场景下不适用，不过我这里没有关系，因为只要按下去了就打开新窗口不在当前window环境下了，所以没有影响。</p><p> 这里再来讲一下 <strong>mousedown</strong>、<strong>mouseup</strong>、<strong>click</strong>这三个事件的主要区别及应用场景：</p><ul><li><p>click ：在同一元素上 相继触发 mousedown 和 mouseup 才会触发 click ，并且能够通过按下回车来触发。大部分场景下都是使用 click ，因为过程比较完整也不会重复触发。经测试右键不会触发。</p></li><li><p>mouseup ：释放鼠标时触发。右键可以触发。</p></li><li><p>mousedown：鼠标按下时触发。不过由于按下就触发的特性，比较的快，所以 mousedown 会在 blur 之前触发，这就是为什么使用 mousedown 可以解决冲突问题。</p></li></ul><p>这里总结一下：一次完整的鼠标单击就是这样一个过程 mousedown &gt; mouseup &gt; click 。 mousedown 和 mouseup 配合可以实现监听鼠标长按。具体怎么使用就看场景需求了。</p></li></ol><h4 id="异步问题"><a href="#异步问题" class="headerlink" title="异步问题"></a>异步问题</h4><p>当我完成了添加提示框功能之后，想要继续完成鼠标经过提示内容给其添加样式的功能，当我写完之后却发现了问题：我是直接将添加样式的代码放在了和文本框平级，我想这从逻辑上来说应该没有什么问题，但实际上却出现了问题，起初是报错提示框内容中的那个jQuery对象是空的，这就很奇怪了，我明明在每次的 input 事件执行时就给这个jQuery对象赋值了，出现这种情况也就意味着input事件发生在添加样式之后。</p><p>经过一段事件的思考我想明白了，主要是忽略了无论是 input 事件还是 Ajax 的请求，这二者都是异步的任务，而添加样式所用的过程是主线程上的同步操作，所以一定会在这两个异步任务之前生效，所以才会导致这种情况的出现，那么解决办法也就很简单了，将添加样式的代码在这两个异步任务之后执行就可以了，所以只需要将代码放进 Ajax 的回调中执行就可以了，那么这样就成功的解决了问题。同理，单击提示进行搜索的那部分代码也是一样的道理。</p><p>其后后面也有一部分代码（通过方向键控制要搜索的内容的那部分）涉及到操作提示框内容的jQuery对象，那为什么不会出现这种情况呢，到这里其实也很好理解了，因为这部分的代码也是由事件来触发的，也是异步的，并且是在最后面，所以一定是最后执行的。</p><p>关于异步单线程可以参考我的这篇文章:<a href="https://q32757468.github.io/2019/07/06/%E5%85%B3%E4%BA%8Ejs%E5%8D%95%E7%BA%BF%E7%A8%8B%E5%BC%82%E6%AD%A5%E4%B8%8E%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%E6%9C%BA%E5%88%B6%E7%9A%84%E5%AD%A6%E4%B9%A0/">简单理解js单线程异步与事件循环机制</a></p><h4 id="阻止键盘方向键的默认行为"><a href="#阻止键盘方向键的默认行为" class="headerlink" title="阻止键盘方向键的默认行为"></a>阻止键盘方向键的默认行为</h4><p>在文本框中，键盘的方向键存在着默认行为，比如说是方向键上，这会使光标移动到文本框最前面，我们在搜索的提示框中就可以通过上下键来切换搜索内容，但是同时也会触发默认行为，使光标移动到文本框最前端，这样的结果很明显不是我们想要的。</p><p>百度了一下相关的解决办法，就是阻止上箭头的默认行为，但是发现好像不起作用，最后其实发现解决办法是和解决 click 和 blur 冲突问题的办法类似，更换触发事件，将按下的<strong>keyup</strong>事件修改为<strong>keydown</strong>事件，然后这时候阻止默认行为就有效了，应该也是触发先后的问题，这样修改之后发生的另一个变化就是按键可以”连发”了,不过这也不算坏处。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>通过制作这个简单的搜索小功能还是收获挺多的，能够完全理解的话也能进步挺多的，特别是异步问题那里，之前只有其概念，现在运用起来了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;这两天在开发一个自己的chrome插件，实现自定义新标签页，那么新标签页肯定少不了搜索的功能，因为我比较常用的搜索引擎是百度，所以会跳到百度的搜索结果，并且通过调用API来实现有一个提示的小窗口，原理是挺简单的，但是写的过程中还是遇到一些问题，记录一下。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vue实现轮播图组件</title>
    <link href="https://q32757468.github.io/2019/08/08/vue%E5%AE%9E%E7%8E%B0%E8%BD%AE%E6%92%AD%E5%9B%BE%E7%BB%84%E4%BB%B6/"/>
    <id>https://q32757468.github.io/2019/08/08/vue实现轮播图组件/</id>
    <published>2019-08-08T11:53:49.000Z</published>
    <updated>2019-08-09T09:36:02.862Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面已经介绍实现过了常见的一些轮播图，也对其实现原理十分的了解了，那么在vue中要如何实现轮播图呢，其实也不难，因为原理都是一样的，只是实现的形式有所区别。这里就以实现淡入淡出轮播图为例。<br><a id="more"></a></p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>实现淡入淡出轮播图的原理其实也都是一样的，前面也提到了，就是将要轮播的所有图片都叠在一起，默认只显示第一张，然后通过定时器来控制图片的切换，并且加上淡入淡出的动画效果，在vue中实现起来还要更加的方便。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><p>template部分：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"banner"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bannerWrap"</span> @<span class="attr">mouseover</span>=<span class="string">"suspend"</span> @<span class="attr">mouseout</span>=<span class="string">"autoPlay"</span> @<span class="attr">blur</span>=<span class="string">"suspend"</span> @<span class="attr">focus</span>=<span class="string">"autoPlay"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"pre"</span> @<span class="attr">click</span>=<span class="string">"pre"</span>&gt;</span>PRE<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"next"</span> @<span class="attr">click</span>=<span class="string">"next"</span>&gt;</span>NEXT<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">tag</span>=<span class="string">"ul"</span> <span class="attr">class</span>=<span class="string">"imgList"</span> <span class="attr">name</span>=<span class="string">"fade"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-show</span>=<span class="string">"item.cur"</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in list"</span> <span class="attr">:key</span>=<span class="string">"item.src"</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">item.src</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"optionList"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in list"</span> <span class="attr">:key</span>=<span class="string">"item.src"</span> @<span class="attr">click</span>=<span class="string">"jump(index)"</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>js部分：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  components: &#123;</span><br><span class="line">    banner: &#123;</span><br><span class="line">      template: <span class="string">'#banner'</span>,</span><br><span class="line">      data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">          timer: <span class="literal">null</span>,</span><br><span class="line">          index: <span class="number">0</span>,</span><br><span class="line">          <span class="comment">// 图片的地址以及是否显示</span></span><br><span class="line">          list: [</span><br><span class="line">            &#123; <span class="string">'src'</span>: <span class="string">'./images/beach-exotic-holiday-248797.jpg'</span>, <span class="string">'cur'</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'src'</span>: <span class="string">'./images/blur-calm-waters-dawn-395198.jpg'</span>, <span class="string">'cur'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'src'</span>: <span class="string">'./images/dark-flash-lightning-1114690.jpg'</span>, <span class="string">'cur'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">            &#123; <span class="string">'src'</span>: <span class="string">'./images/mountain-range-mountains-114979.jpg'</span>, <span class="string">'cur'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">          ]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">        <span class="comment">// 定义自动播放函数，通过调用next方法来实现</span></span><br><span class="line">        autoPlay() &#123;</span><br><span class="line">          clearInterval(<span class="keyword">this</span>.timer)<span class="comment">//还是一样，开启定时器之前需要先清除一下，防止bug</span></span><br><span class="line">          <span class="keyword">this</span>.timer = setInterval(<span class="keyword">this</span>.next, <span class="number">2000</span>)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 定义切换到下一张图片的方法</span></span><br><span class="line">        next() &#123;</span><br><span class="line">          <span class="keyword">this</span>.index++;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.index &gt;= <span class="keyword">this</span>.list.length) &#123;</span><br><span class="line">            <span class="keyword">this</span>.index = <span class="number">0</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">this</span>.list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.cur = <span class="literal">false</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">this</span>.list[<span class="keyword">this</span>.index].cur = <span class="literal">true</span>;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 定义切换到前一张图片的方法</span></span><br><span class="line">        pre() &#123;</span><br><span class="line">          <span class="keyword">this</span>.index--;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">this</span>.index &lt;= <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.index = <span class="keyword">this</span>.list.length - <span class="number">1</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">this</span>.list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.cur = <span class="literal">false</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">this</span>.list[<span class="keyword">this</span>.index].cur = <span class="literal">true</span>;</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="keyword">this</span>.index);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 暂停的方法</span></span><br><span class="line">        suspend() &#123;</span><br><span class="line">          clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 点击选项圆点进行跳转的方法</span></span><br><span class="line">        jump(index) &#123;</span><br><span class="line">          <span class="keyword">this</span>.index = index;</span><br><span class="line">          <span class="keyword">this</span>.list.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            item.cur = <span class="literal">false</span>;</span><br><span class="line">          &#125;);</span><br><span class="line">          <span class="keyword">this</span>.list[index].cur = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      mounted() &#123;</span><br><span class="line">        <span class="comment">// 自动播放函数以及失焦暂定获焦开启都需要在mounted阶段设置</span></span><br><span class="line">        <span class="keyword">this</span>.autoPlay();</span><br><span class="line">        <span class="comment">// 直接在mounted中写聚焦以及失焦的函数</span></span><br><span class="line">        <span class="built_in">window</span>.blur = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          clearInterval(<span class="keyword">this</span>.timer)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">window</span>.focus = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          autoPlay()</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>整体的思路和前面使用jQuery写的轮播图的思路是一致的，只不过是换了一种方式。</p><p>样式部分：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">  * &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.bannerWrap</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.imgList</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.imgList</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.imgList</span> <span class="selector-tag">img</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-tag">button</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-50%);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.pre</span> &#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.next</span> &#123;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">50px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.optionList</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">60px</span>;</span><br><span class="line">    <span class="attribute">bottom</span>: <span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.optionList</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 实现动画的两组类 */</span></span><br><span class="line">  <span class="selector-class">.fade-enter-active</span>,</span><br><span class="line">  <span class="selector-class">.fade-leave-active</span> &#123;</span><br><span class="line">    <span class="attribute">transition</span>: opacity .<span class="number">5s</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.fade-enter</span>,</span><br><span class="line">  <span class="selector-class">.fade-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></p><p>样式部分要注意的就是实现动画效果的两组类，不能设置错了。</p><p>通过以上代码就可以实现一个淡入淡出的轮播图了，非常的简便，代码也相较不使用vue开发要少的多。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这次通过vue实现了一个淡入淡出的轮播图组件，原理都是一样的，只不过是使用vue来开发会更加简便。滑动轮播图也是类似的，这里就不演示了。重要的是熟悉vue的开发思路以及开发原理。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面已经介绍实现过了常见的一些轮播图，也对其实现原理十分的了解了，那么在vue中要如何实现轮播图呢，其实也不难，因为原理都是一样的，只是实现的形式有所区别。这里就以实现淡入淡出轮播图为例。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>详解使用jQuery实现滑动轮播图</title>
    <link href="https://q32757468.github.io/2019/08/07/%E8%AF%A6%E8%A7%A3%E4%BD%BF%E7%94%A8jQuery%E5%AE%9E%E7%8E%B0%E6%BB%91%E5%8A%A8%E8%BD%AE%E6%92%AD%E5%9B%BE/"/>
    <id>https://q32757468.github.io/2019/08/07/详解使用jQuery实现滑动轮播图/</id>
    <published>2019-08-07T13:48:50.000Z</published>
    <updated>2019-08-08T06:42:22.253Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;网页中的轮播图十分的常见，并且轮播图的动画样式也有很多种，前面已经有介绍过淡入淡出的轮播图了，比较的简单，这次来详细介绍一下滑动轮播图，并且优化了之前的很多细节，一起来看一看。<br><a id="more"></a></p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>在实现之前先介绍一下滑动轮播图实现的原理，这里分为两种来介绍，常见的滑动轮播图有两种，一种是无限循环滑动的，一种是会往滑回开始位置的，先来讲讲这二者的原理以及区别：</p><h4 id="会滑回的"><a href="#会滑回的" class="headerlink" title="会滑回的"></a>会滑回的</h4><p>通过图片来更好的理解：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/capaDv9kmW.wvAf0Nf.iNakYE9IUQ28dZJhLLcFol5k!/b/dL4AAAAAAAAA&bo=7gahAgAAAAADB2k!&rf=viewer_4"><br>通过这张图片我们就很好理解了，每次轮播其实就是将三张图片当成一个整体向左移一张图片的宽度实现，当到达最左边或者最右边的时候再通过动画滚回第一张或者是最后一张图片，这是一种比较常见的方式。</p><h4 id="无限滑动的"><a href="#无限滑动的" class="headerlink" title="无限滑动的"></a>无限滑动的</h4><p>也一样通过图片来更好的理解：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/3HPElTrJOiNc5U*AqwzOl13jpj.nXXQ9Ya8Im0Cyc.s!/b/dLYAAAAAAAAA&bo=cQXNAAAAAAADB5s!&rf=viewer_4"><br>其实无限滑动的基本原理都是和上面的会滑回的是一样的，最大的区别就在于当到达最左边或者最右边时，这次就不是通过动画来过渡了，而是通过在图片列表的开头添加一张最后的图片以及列表末尾添加一张开头的图片，当轮播到最后一张图片的时候通过修改css样式跳回到第一张图片，由于在末尾添加了一张开头的图片，所以看不出来这个跳转的过程，这样就实现了无限滑动的效果。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="普通版"><a href="#普通版" class="headerlink" title="普通版"></a>普通版</h4><p>HTML部分：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bannerWrap"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"pre"</span>&gt;</span>PRE<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"next"</span>&gt;</span>NEXT<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"imgList"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/cool-wallpaper-dawn-hd-wallpaper-66997.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/flowers-4352530_1280.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"./images/hd-wallpaper-mountain-range-mountains-114979.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"optionList"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>html部分没有什么好讲的，按照结构布局好就可以了。</p><p>js部分：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./js/jquery-3.4.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bannerWrap = $(<span class="string">'.bannerWrap'</span>);</span><br><span class="line">    <span class="keyword">const</span> imgList = $(<span class="string">'.imgList'</span>);</span><br><span class="line">    <span class="keyword">const</span> optionList = $(<span class="string">'.optionList'</span>);</span><br><span class="line">    <span class="keyword">const</span> preBt = $(<span class="string">'.pre'</span>);</span><br><span class="line">    <span class="keyword">const</span> nextBt = $(<span class="string">'.next'</span>);</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">const</span> imgWidth = bannerWrap.width();</span><br><span class="line">    <span class="keyword">const</span> len = imgList.children().length;</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自动轮播的函数，通过调用向右滑动的函数来实现轮播</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">autoSlide</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      timer = setInterval(next, <span class="number">3000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    autoSlide();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当鼠标经过轮播图时暂停的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">suspend</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      bannerWrap.hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(timer)</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 在每次重新开启定时器之前都需要将定时器清除一遍，防止由于特殊情况定时器并未真正关闭而导致重复开启定时器</span></span><br><span class="line">        clearInterval(timer)</span><br><span class="line">        autoSlide();</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    suspend();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 滑动到下一张的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      index = index &gt;= len - <span class="number">1</span> ? <span class="number">0</span> : index + <span class="number">1</span>;</span><br><span class="line">      <span class="comment">// 在新的动画开始之前都需要停止一下之前的动画</span></span><br><span class="line">      imgList.stop().animate(&#123;</span><br><span class="line">        <span class="string">'marginLeft'</span>: -imgWidth * index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 滑动到前一张的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">pre</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      index = index &lt;= <span class="number">0</span> ? (len - <span class="number">1</span>) : (index - <span class="number">1</span>);<span class="comment">//这里的 index-1 一定要打上括号，否则可能会引发bug</span></span><br><span class="line">      imgList.stop().animate(&#123;</span><br><span class="line">        <span class="string">'marginLeft'</span>: -imgWidth * index</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nextBt.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      next();</span><br><span class="line">    &#125;)</span><br><span class="line">    preBt.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      pre();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小圆点跳转的函数</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">jump</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">        optionList.children().eq(i).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          imgList.stop().animate(&#123;</span><br><span class="line">            <span class="string">'marginLeft'</span>: -imgWidth * i</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    jump();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//失去焦点以及获得焦点时</span></span><br><span class="line">    $(<span class="built_in">window</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(timer)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="built_in">window</span>).focus(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(timer)</span><br><span class="line">      autoSlide();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><p>js部分最重要的就是思路，都在注释中有写，应该比较好理解</p><p>css部分：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">* &#123;</span><br><span class="line">  <span class="attribute">list-style</span>: none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.bannerWrap</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.imgList</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">img</span> &#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">button</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-50%);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.pre</span> &#123;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.next</span> &#123;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">50px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.optionList</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">60px</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.optionList</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#fff</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>也都是一些基本的样式设置，没有什么好讲的。这里相比于以前写的轮播图来说有优化的地方就是这里并没有直接写一个自动轮播的函数，而是通过调用下一站图片的函数来实现自动轮播，这样就减少了重复代码。</p><h4 id="无限版"><a href="#无限版" class="headerlink" title="无限版"></a>无限版</h4><p>html部分的代码和普通版的是一样的就不放出来了</p><p>css部分代码就只有一下这一部分和普通版有所区别：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-class">.imgList</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">margin-left</span>: -<span class="number">800px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>区别就是调整 margin-left 以显示真正的第一张图片。</p><p>重点就是js部分：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./js/jquery-3.4.1.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bannerWrap = $(<span class="string">'.bannerWrap'</span>);</span><br><span class="line">    <span class="keyword">const</span> imgList = $(<span class="string">'.imgList'</span>);</span><br><span class="line">    <span class="keyword">const</span> optionList = $(<span class="string">'.optionList'</span>);</span><br><span class="line">    <span class="keyword">const</span> preBt = $(<span class="string">'.pre'</span>);</span><br><span class="line">    <span class="keyword">const</span> nextBt = $(<span class="string">'.next'</span>);</span><br><span class="line">    <span class="keyword">let</span> timer;</span><br><span class="line">    <span class="keyword">const</span> imgWidth = bannerWrap.width();</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line">    <span class="comment">//通过js来添加两张图片</span></span><br><span class="line">    imgList.prepend(imgList.children().last().get(<span class="number">0</span>).outerHTML)<span class="comment">//一定要写在获取长度之前</span></span><br><span class="line">    imgList.append(imgList.children().get(<span class="number">1</span>).outerHTML)<span class="comment">//一定要写在获取长度之前</span></span><br><span class="line">    <span class="keyword">const</span> len = imgList.children().length;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">autoSlide</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      timer = setInterval(next, <span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    autoSlide();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">suspend</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      bannerWrap.hover(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(timer)</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        clearInterval(timer)</span><br><span class="line">        autoSlide();</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    suspend();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 滑动到下一张的函数，由于多了两张图片，所以要注意index的值</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      index++;</span><br><span class="line">      <span class="comment">// 这里的stop方法要格外注意一下，必须像这样加参数</span></span><br><span class="line">      imgList.stop(<span class="literal">false</span>, <span class="literal">true</span>).animate(&#123;</span><br><span class="line">        <span class="string">'marginLeft'</span>: -imgWidth * index</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &gt;= (len - <span class="number">1</span>)) &#123;</span><br><span class="line">          index = <span class="number">1</span>;</span><br><span class="line">          <span class="comment">// 重点就是这个动画执行完毕后的回调，通过这个回调来讲图片重新调回想要的位置以实现无限</span></span><br><span class="line">          imgList.css(&#123;</span><br><span class="line">            <span class="string">'marginLeft'</span>: -imgWidth</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 滑动到前一张的函数，与next函数类似</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">pre</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      index--;</span><br><span class="line">      <span class="keyword">if</span> (index &lt;= (<span class="number">-1</span>)) &#123;</span><br><span class="line">        index = (len - <span class="number">2</span>);</span><br><span class="line">        imgList.css(&#123;</span><br><span class="line">          <span class="string">'marginLeft'</span>: -imgWidth * (index)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      imgList.stop(<span class="literal">false</span>, <span class="literal">true</span>).animate(&#123;</span><br><span class="line">        <span class="string">'marginLeft'</span>: -imgWidth * index</span><br><span class="line">      &#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">          index = (len - <span class="number">2</span>);</span><br><span class="line">          imgList.css(&#123;</span><br><span class="line">            <span class="string">'marginLeft'</span>: -imgWidth * (index)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nextBt.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      next();</span><br><span class="line">    &#125;)</span><br><span class="line">    preBt.click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      pre();</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 小圆点跳转的函数，这里由于多了两张图片，所以也要稍微修改一下</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">jump</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; len - <span class="number">2</span>; i++) &#123;</span><br><span class="line">        optionList.children().eq(i).click(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">          imgList.stop().animate(&#123;</span><br><span class="line">            <span class="string">'marginLeft'</span>: -imgWidth * (i + <span class="number">1</span>)</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    jump();</span><br><span class="line"></span><br><span class="line">    $(<span class="built_in">window</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(timer)</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="built_in">window</span>).focus(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      clearInterval(timer)</span><br><span class="line">      autoSlide();</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><p>与普通版不一样的地方都注释出来了，与普通版思路都是差不多的，区别就在于处理最后一张图片回到第一张（或者相反）的方式上有所区别。</p><p>这里再详细讲一下<code>stop()</code>方法为什么要加参数：</p><ul><li><p>如果不加参数的话默认是停止当前动画继续后面的动画，当快速点击下一张图片到最后一张图片通过修改 css 跳回第一张时由于停止了动画就不会执行回调，所以就会持续出现空白。</p></li><li><p>而通过给stop()方法传递参数就可以解决这一问题，<code>stop(false, true)</code>则表示立即完成当前动画，继续后面动画，这样传递参数以后就不会因为停止了动画而导致不执行回调函数了，进而就解决了问题。</p></li></ul><h3 id="一些要十分注意的问题"><a href="#一些要十分注意的问题" class="headerlink" title="一些要十分注意的问题"></a>一些要十分注意的问题</h3><p>轮播图思路比较简单，但是在实现过程中要是忽略一些细节就有可能会导致意想不到的结果，这里提出来要十分注意：</p><ul><li><p>在开启新的动画之前一定要调用<strong>stop()</strong>方法讲之前的动画停止，防止作出不必要的动画。</p></li><li><p>在开启重新调用自动轮播函数之前一定要先清除一遍定时器，否则可能会导致重复开启定时器。</p></li><li><p>由于setInterval在后台运行时会自动停止，当重新运行时会一次性将在后台时的全部运行完，所以当重新切回轮播图时会疯狂滑动，为了避免这种情况就需要手动设置在页面失去焦点时暂停定时器，获取焦点时重新开启。</p></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>前面有写过淡入淡出的轮播图，原理更加的简单，实现起来也更加的简单，这次通过写滑动轮播图来练练手，并且优化了代码，写的过程中也遇到了很多的问题，也都解决了，进而学习到了很多的细节。下次尝试使用vue来写一个轮播图组件。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;网页中的轮播图十分的常见，并且轮播图的动画样式也有很多种，前面已经有介绍过淡入淡出的轮播图了，比较的简单，这次来详细介绍一下滑动轮播图，并且优化了之前的很多细节，一起来看一看。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>使用vue来实现选项卡</title>
    <link href="https://q32757468.github.io/2019/08/06/%E4%BD%BF%E7%94%A8vue%E6%9D%A5%E5%AE%9E%E7%8E%B0%E9%80%89%E9%A1%B9%E5%8D%A1/"/>
    <id>https://q32757468.github.io/2019/08/06/使用vue来实现选项卡/</id>
    <published>2019-08-06T02:54:14.000Z</published>
    <updated>2019-08-06T03:32:44.621Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面有学习过如何使用原生js或者是jQuery来实现选项卡的功能，原理其实都差不多是一样的，那么现在学习过vue，试着来使用vue来实现选项卡的功能，理解vue开发的思路。<br><a id="more"></a></p></blockquote><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>其实选项卡功能的原理大体上都是一样的，都是通过鼠标经过来添加样式并且删除其他兄弟的样式来实现的，但是我们在使用vue来开发的过程中会有很大不一样的地方就是使用vue并不需要操作元素，只需要关心业务逻辑就好了，所以其实就可以更加简单的实现选项卡的功能。</p><h3 id="实现"><a href="#实现" class="headerlink" title="实现"></a>实现</h3><h4 id="HTML部分"><a href="#HTML部分" class="headerlink" title="HTML部分"></a>HTML部分</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tabs</span>&gt;</span><span class="tag">&lt;/<span class="name">tabs</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">//定义模板</span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"tabs"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrap"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"tab_h"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-on:mouseover</span>=<span class="string">"toActive(index)"</span> <span class="attr">:class</span>=<span class="string">"&#123;cur:item.active&#125;"</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in tabList"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span></span><br><span class="line">          &#123;&#123;item.head&#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"tab_b"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-show</span>=<span class="string">"item.active"</span> <span class="attr">v-for</span>=<span class="string">"(item,index) in tabList"</span> <span class="attr">:key</span>=<span class="string">"index"</span>&gt;</span>&#123;&#123;item.body&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里是在html中定义的组件模板，其实这个在哪定义模板不重要，重要的是这上面的思路。</p><h4 id="JS部分"><a href="#JS部分" class="headerlink" title="JS部分"></a>JS部分</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"./../../js/vue.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    components: &#123;</span><br><span class="line">      tabs: &#123;</span><br><span class="line">        template: <span class="string">'#tabs'</span>,</span><br><span class="line">        data() &#123;</span><br><span class="line">          <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="comment">//将所有的数据都存放在这个数组中，遍历数组就可以得到所有的数据</span></span><br><span class="line">            tabList: [</span><br><span class="line">              &#123; <span class="string">'head'</span>: <span class="string">'选项一'</span>, <span class="string">'body'</span>: <span class="string">'这是选项一中的内容'</span>, <span class="string">'active'</span>: <span class="literal">true</span> &#125;,</span><br><span class="line">              &#123; <span class="string">'head'</span>: <span class="string">'选项二'</span>, <span class="string">'body'</span>: <span class="string">'这是选项二中的内容'</span>, <span class="string">'active'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">              &#123; <span class="string">'head'</span>: <span class="string">'选项三'</span>, <span class="string">'body'</span>: <span class="string">'这是选项三中的内容'</span>, <span class="string">'active'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">              &#123; <span class="string">'head'</span>: <span class="string">'选项四'</span>, <span class="string">'body'</span>: <span class="string">'这是选项四中的内容'</span>, <span class="string">'active'</span>: <span class="literal">false</span> &#125;,</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">          <span class="comment">//定义鼠标经过时的方法</span></span><br><span class="line">          toActive(index) &#123;</span><br><span class="line">            <span class="keyword">this</span>.tabList.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item.active = <span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">this</span>.tabList[index].active = <span class="literal">true</span>;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure><p>可以看出使用vue来实现这样的功能是十分的方便的，不用像原生那样操作dom元素。</p><h4 id="CSS部分"><a href="#CSS部分" class="headerlink" title="CSS部分"></a>CSS部分</h4><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="selector-tag">style</span>&gt;</span><br><span class="line">  * &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">list-style</span>: none;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.wrap</span> &#123;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">400px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">20px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.tab_h</span>,</span><br><span class="line">  <span class="selector-class">.tab_b</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">800px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.tab_h</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.tab_b</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid black;</span><br><span class="line">    <span class="attribute">border-collapse</span>: collapse;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.cur</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">color</span>: orange;</span><br><span class="line">    <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>css部分就不重要了，主要是激活时的样式。</p><h4 id="效果"><a href="#效果" class="headerlink" title="效果"></a>效果</h4><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/lg.L3FE0o1xfcEINrSLKpQY7Ddin2CzPnBOIpWOgwh4!/b/dL4AAAAAAAAA&bo=BQVzAQAAAAADB1A!&rf=viewer_4"></p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>在学习vue的过程中我时常会想如何通过vue来实现一些我们平时比较常见的功能，通过原生来实现的思路已经非常清除了，那么如何将将同样的思路转化在vue中实现，那么通过实现这次的选项卡的小例子算是见到了vue的强大简便之处，一样的思路，换了一种实现的方式，但是却会更加的简便，vue确实是一款非常好用的框架，特别是这种思路太让人佩服了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面有学习过如何使用原生js或者是jQuery来实现选项卡的功能，原理其实都差不多是一样的，那么现在学习过vue，试着来使用vue来实现选项卡的功能，理解vue开发的思路。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>GIT的基本使用</title>
    <link href="https://q32757468.github.io/2019/07/30/GIT%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>https://q32757468.github.io/2019/07/30/GIT的基本使用/</id>
    <published>2019-07-30T08:50:35.000Z</published>
    <updated>2019-08-12T04:55:44.322Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。在开发中也是经常用到的工具，在了解到GIT之前我就想过有没有什么工具可以方便的进行回退之类的将文件管理起来的工具，直到我慢慢的知道了GIT，并且学会了如何使用它，就知道了其实管理文件起始也挺简单的。这里就介绍以下GIT的常见用法以及命令。<br><a id="more"></a></p></blockquote><h3 id="先来了解几个概念"><a href="#先来了解几个概念" class="headerlink" title="先来了解几个概念"></a>先来了解几个概念</h3><p>这是我觉得比较简单能理解git工作原理的一张图：</p><p><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/aE*x*FXlMLUO*EkQRrvekD9Kn1x7DLBlK5ICxFKT7pY!/b/dIMAAAAAAAAA&bo=AQUQAgAAAAADBzQ!&rf=viewer_4"></p><p>这里来解释以下图中所提到的几个概念：</p><h4 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h4><p>工作区很好理解，其实就是我们项目工作所在的文件夹，这个就被称之为工作区</p><h4 id="暂存区"><a href="#暂存区" class="headerlink" title="暂存区"></a>暂存区</h4><p>暂存区也很好理解，通过名字就知道是暂时存放的文件夹，我们通过相应命令就可以将项目中的文件提交到暂存区当中，当作中间临时存放的区域。而暂存区中的文件等待着被提交到<strong>本地仓库</strong>中或者被清除。</p><h4 id="本地仓库"><a href="#本地仓库" class="headerlink" title="本地仓库"></a>本地仓库</h4><p>本地仓库就是在暂存区中的文件最终确定要提交，然后会被提交到的场所。这个仓库里面的所有文件都可以被Git管理起来，每个文件的修改，删除，Git都能跟踪，以便任何时刻都可以追踪历史，或者在将来某个时刻还可以将文件”还原”。</p><h4 id="远程仓库"><a href="#远程仓库" class="headerlink" title="远程仓库"></a>远程仓库</h4><p>远程仓库就是远程存放我们项目文件的地方，可以通过相应命令来讲提交到本地仓库中的文件上传到远程仓库中。</p><p>了解完这几个概念之后其实就大致能明白GIT的简单工作流程了，接下来看看具体怎么操作。</p><h3 id="GIT常用命令"><a href="#GIT常用命令" class="headerlink" title="GIT常用命令"></a>GIT常用命令</h3><h4 id="git-init"><a href="#git-init" class="headerlink" title="git init"></a>git init</h4><p>这个是使用git的开始，当执行了这个操作就表示这是一个git目录了，目录中会多出来一个隐藏的 .git 文件夹，这个就是git本地仓库。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git init</span><br></pre></td></tr></table></figure></p><p>后面可以跟一个目录，在指定目录初始化。</p><h4 id="git-clone"><a href="#git-clone" class="headerlink" title="git clone"></a>git clone</h4><p>可以将一个远程仓库克隆到本地<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git clone [url]</span><br></pre></td></tr></table></figure></p><p>这里的url地址推荐使用ssh会更快一些。</p><h4 id="git-add"><a href="#git-add" class="headerlink" title="git add"></a>git add</h4><p>通过 <code>git add</code>  加上文件名可以将指定文件的修改添加都暂存区。</p><p>也可以通过<code>git add .</code>或者是<code>git add -A</code>来将所有的文件修改添加到暂存区，二者区别在于前者不会将文件删除添加到暂存区，后者会。</p><h4 id="git-status"><a href="#git-status" class="headerlink" title="git status"></a>git status</h4><p>可以通过这个命令来查看当前工作区文件的所有改动</p><p>也可以添加 -s 选项来的到简短的结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git status -s</span><br></pre></td></tr></table></figure></p><h4 id="git-diff"><a href="#git-diff" class="headerlink" title="git diff"></a>git diff</h4><p>可以通过此命令来查看当前工作区中的文件与本地仓库中的区别，这是在没有添加到暂存区的情况下。</p><p>当添加到暂存区后可以这样查看：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git diff --cached</span><br></pre></td></tr></table></figure></p><h4 id="git-commit"><a href="#git-commit" class="headerlink" title="git commit"></a>git commit</h4><p>通过此命令可以将暂存区中的快照添加到本地仓库中。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m &apos;通过-m 选项添加注释&apos;</span><br></pre></td></tr></table></figure></p><p>提交完成之后再用 git status 命令查看则不会有内容</p><h4 id="git-reset-HEAD"><a href="#git-reset-HEAD" class="headerlink" title="git reset HEAD"></a>git reset HEAD</h4><p>通过此命令可以撤销暂存区中的快照，如果想取消某文件被添加到暂存区，那么通过此命令就可以使它不被提交到本地仓库，简单来说就是取消暂存。</p><h4 id="git-reset-–hard-HEAD"><a href="#git-reset-–hard-HEAD" class="headerlink" title="git reset  –hard HEAD^"></a>git reset  –hard HEAD^</h4><p>这个命令的作用就是版本回退，每个<code>^</code> 符号就表示每个 <code>git log</code>中的记录，如果要回退固定次数可以这样写：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset  --hard HEAD~100</span><br></pre></td></tr></table></figure></p><p>这是回退100次。</p><p>也可以通过版本号来回退到固定版本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset  --hard  49bdb9c</span><br></pre></td></tr></table></figure></p><p>版本号可以通过<code>git log --oneline</code>来查看</p><h4 id="git-checkout-–-file"><a href="#git-checkout-–-file" class="headerlink" title="git checkout  – file"></a>git checkout  – file</h4><p>通过此命令可以丢弃工作区中的内容</p><p>如果该文件的修改提交到了暂存区就会恢复到暂存区时的样子</p><p>如果没有提交到暂存区就会恢复到和版本库一致。</p><h4 id="git-stash"><a href="#git-stash" class="headerlink" title="git stash"></a>git stash</h4><p>通过此命令可以将当前工作区的工作状态储藏起来，这样就可以方便的切换到其他分支上进行工作。</p><p>可以通过查看储藏列表：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash list</span><br></pre></td></tr></table></figure></p><p>可以通过<code>git stash apply</code>恢复到最近的储藏，也可以恢复到指定的储藏：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply stash@&#123;2&#125;</span><br></pre></td></tr></table></figure></p><p>默认只会恢复文件的更改，并不会恢复暂存，如果要恢复暂存则需要添加一个<code>--index</code>选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash apply --index</span><br></pre></td></tr></table></figure></p><p>可以通过<code>git stash drop@{2}</code>来删除指定储藏，也可以恢复之后立即删除：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash pop</span><br></pre></td></tr></table></figure></p><p>如果想要反悔恢复的储藏，可以这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git stash show -p stash@&#123;0&#125; | git apply -R</span><br></pre></td></tr></table></figure></p><h4 id="基本命令"><a href="#基本命令" class="headerlink" title="基本命令"></a>基本命令</h4><p>查看分支：git branch</p><p>创建分支：git branch name</p><p>切换分支：git checkout name</p><p>创建+切换分支：git checkout –b name</p><p>合并某分支到当前分支：git merge name</p><p>删除分支：git branch –d name</p><p>在git中HEAD指向的是当前分支。</p><h4 id="解决冲突"><a href="#解决冲突" class="headerlink" title="解决冲突"></a>解决冲突</h4><p>当同时在两个分支上修改了同一个地方的话，在合并分支的时候就会产生冲突，这个时候就需要手动进行修复修改文件内容，<br>再进行一次提交就可以解决冲突：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m &apos;fix conflicts&apos;</span><br></pre></td></tr></table></figure></p><h3 id="远程仓库管理"><a href="#远程仓库管理" class="headerlink" title="远程仓库管理"></a>远程仓库管理</h3><p>连接远程仓库有两种方式，一种是直接将远程仓库克隆下来，这个上面已经说过了。</p><p>还有一种就是将本地仓库连接到远程仓库：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git add origin &lt;url&gt;</span><br></pre></td></tr></table></figure></p><p>通过这种方式就可以将本地仓库与远程仓库相连，还是推荐使用ssh。</p><p>这里的 origin只是一个名字以后，代表的是远程仓库在本地使用过程中的一个代号，可以取其他名字。在绑定分支的会用到这个名字：</p><p>向远程仓库提交时：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br></pre></td></tr></table></figure></p><p>意思就是将本地的当前分支的内容推到远程的 master 中。获取也是一样的。</p><h3 id="忽略提交"><a href="#忽略提交" class="headerlink" title="忽略提交"></a>忽略提交</h3><p>有时我们会需求并不是所有文件都需要进行追踪提交，比如说开发工具或者是临时文件之类的，那么这个时候我们就可以通过配置 .gitignore 这个文件来配置需要忽略的文件。</p><p>在 .gitignore 文件中每一行代表一个忽略规则。</p><p>配置语法：</p><ul><li><p>以斜杠“/”开头表示目录；</p></li><li><p>以星号“*”通配多个字符；</p></li><li><p>以问号“?”通配单个字符</p></li><li><p>以方括号“[]”包含单个字符的匹配列表；</p></li><li><p>以叹号“!”表示不忽略(跟踪)匹配到的文件或目录。</p></li><li><p>**匹配多级目录，可在开始，中间，结束</p></li></ul><p>忽略规则也存在优先级（由高到低）：</p><ul><li><p>从命令行中读取可用的忽略规则</p></li><li><p>当前目录定义的规则</p></li><li><p>父级目录定义的规则，依次地推</p></li><li><p>$GIT_DIR/info/exclude 文件中定义的规则</p></li><li><p>core.excludesfile中定义的全局规则</p></li></ul><p>常用规则示例：</p><ul><li><p>bin/: 忽略当前路径下的bin文件夹，该文件夹下的所有内容都会被忽略，不忽略 bin 文件</p></li><li><p>/bin: 忽略根目录下的bin文件</p></li><li><p>/*.c: 忽略 cat.c，不忽略 build/cat.c</p></li><li><p>debug/*.obj: 忽略 debug/io.obj，不忽略 debug/common/io.obj 和 tools/debug/io.obj</p></li><li><p>**/foo: 忽略/foo, a/foo, a/b/foo等</p></li><li><p>a/**/b: 忽略a/b, a/x/b, a/x/y/b等</p></li><li><p>!/bin/run.sh: 不忽略 bin 目录下的 run.sh 文件</p></li><li><p>*.log: 忽略所有 .log 文件</p></li><li><p>config.php: 忽略当前路径的 config.php 文件</p></li></ul><blockquote><p>要注意的一件事情是.gitignore文件只能忽略那些没有被追踪的文件，已经被追踪的文件对于 .gitignore文件来说是无效的。</p></blockquote><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这里介绍了一些GIT常见的也比较简单的用法，平时常用的也不多，其他的知道了解就好了。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;Git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。在开发中也是经常用到的工具，在了解到GIT之前我就想过有没有什么工具可以方便的进行回退之类的将文件管理起来的工具，直到我慢慢的知道了GIT，并且学会了如何使用它，就知道了其实管理文件起始也挺简单的。这里就介绍以下GIT的常见用法以及命令。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>vue-js的学习（在webpack中使用vue）</title>
    <link href="https://q32757468.github.io/2019/07/28/vue-js%E7%9A%84%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9C%A8webpack%E4%B8%AD%E4%BD%BF%E7%94%A8vue%EF%BC%89/"/>
    <id>https://q32757468.github.io/2019/07/28/vue-js的学习（在webpack中使用vue）/</id>
    <published>2019-07-28T09:09:12.000Z</published>
    <updated>2019-07-29T09:08:37.467Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;前面学习过了vue的一些基础的知识，但是都是直接开发，并没有使用webpack这样的打包工具，那么该如何通过webpack来开发一个vue项目呢，并且这样与直接开发有什么不一样的地方呢，就让我们来学习一下。<br><a id="more"></a></p></blockquote><h3 id="在项目中安装vue"><a href="#在项目中安装vue" class="headerlink" title="在项目中安装vue"></a>在项目中安装vue</h3><p>在学习使用webpack之前我们在项目中都是直接使用 script 标签在项目中引入vue所需要的文件，那么现在通过webpack来构建项目的话就应该将所有的依赖都引入到入口文件当中，页面中只会引入一个入口文件。</p><h4 id="通过npm来安装vue"><a href="#通过npm来安装vue" class="headerlink" title="通过npm来安装vue"></a>通过npm来安装vue</h4><ol><li><p>先将vue安装进项目：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue -S</span><br></pre></td></tr></table></figure></li><li><p>然后在入口文件中引入vue</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br></pre></td></tr></table></figure></li></ol><p>通过这样简单的安装引入就成功的将vue引入了项目当中</p><h4 id="通过-vue-文件来设置组件"><a href="#通过-vue-文件来设置组件" class="headerlink" title="通过 .vue 文件来设置组件"></a>通过 .vue 文件来设置组件</h4><p>当我们执行完上面的引入操作，我们直接在入口文件中写一些相关的vue中的代码的话，会在浏览器的控制台中看见报错信息，意思大概就是我们引入的vue包是runtime的包，不能直接使用组件相关的东西。</p><p>那我们要怎么样做呢？要解决这个问题只需要引入完整的vue包文件就好了，有三种方式：</p><ul><li><p>找到 <strong>node_modules</strong>中的vue项目包，然后修改它的 package.json ，将它提供给外部的入口文件修改为完整的那个：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;main&quot;: &quot;dist/vue.js&quot;,</span><br></pre></td></tr></table></figure></li><li><p>在项目的入口文件中修改引入的vue文件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue/dist/vue&apos;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>值得注意的一件事情是这里的路径可以将前面的node_modules这个目录省略掉，会自动去这个目录中找我们提供的这个路径。</p></blockquote><ul><li>修改webpack的配置文件，加上以下代码：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">    alias: &#123;</span><br><span class="line">      &apos;vue$&apos;: &apos;vue/dist/vue.esm.js&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure></li></ul><p>那么任选这三种办法中的其中一种都可以解决前面的问题，但是实际上并不推荐这样去做，因为在webpack中使用vue比较推荐另一种做法，就是使用<strong>render</strong>函数，通过 render 函数来引入vue组件，而这种组件是单独的以<code>.vue</code>后缀结尾的文件。</p><h5 id="安装相关包和进行相关配置"><a href="#安装相关包和进行相关配置" class="headerlink" title="安装相关包和进行相关配置"></a>安装相关包和进行相关配置</h5><ol><li><p>将相应的工具安装进项目</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-loader vue-template-compiler -D</span><br></pre></td></tr></table></figure></li><li><p>在webpack配置文件中配置好相应的匹配规则：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rules: [ // 匹配规则</span><br><span class="line">  &#123; test: /\.vue$/, use: &apos;vue-loader&apos; &#125;,//处理vue文件</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li><li><p>在webpack配置文件中配置好插件相应设置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  // 在webpack的4.x的版本中必须引入这个配置</span><br><span class="line">  new VueLoaderPlugin()</span><br><span class="line">]</span><br></pre></td></tr></table></figure></li></ol><p>通过以上的安装和配置，一个基本的环境就配置好了，接下来来看看如何通过<code>.vue</code>文件来创建组件。</p><h3 id="使用render函数"><a href="#使用render函数" class="headerlink" title="使用render函数"></a>使用render函数</h3><p>新建一个<code>.vue</code>文件，这个文件将会替代页面中一一开始的id为app的元素：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//定义模板</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    这是一个测试内容</span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line">// 定义业务逻辑</span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  <span class="comment">//通过export default来向外暴露</span></span></span><br><span class="line"><span class="undefined">  data() &#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      msg: <span class="string">"这是一条消息"</span></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined">&#125;;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"></span><br><span class="line">//定义样式</span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>使用<strong>render</strong>函数引入前面定义的vue文件：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//先将文件引入页面当中</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  <span class="comment">//再使用render函数使用到引入的组件</span></span><br><span class="line">  render: <span class="function"><span class="params">c</span> =&gt;</span> c(App),<span class="comment">//这里是使用了ES6中的箭头函数的语法进行了简写</span></span><br><span class="line">  data: &#123;</span><br><span class="line">    msg: <span class="string">'这是一个测试内容'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>这是render函数的完整写法：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">render: <span class="function"><span class="keyword">function</span> (<span class="params">createElements</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> createElements(App)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>经过这些操作以后页面中原本的 #app 的div块就会被替换为 引入的 App组件，所以要注意的是不要在里面写任何东西，因为会被替换掉。以后需要在其中引入其他的组件就直接在App组件中引入就可以了。</p><h3 id="在webpack中使用vue-router"><a href="#在webpack中使用vue-router" class="headerlink" title="在webpack中使用vue-router"></a>在webpack中使用vue-router</h3><p>前面已经学习过了如何使用vue-router，其实在webpack中使用vue-router的方式还是差不多的，只不过最主要的区别就是引入包和引入各个组件的时候有区别了。</p><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i vue-router -S</span><br></pre></td></tr></table></figure><h4 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &apos;vue&apos;</span><br><span class="line">import VueRouter from &apos;vue-router&apos;</span><br></pre></td></tr></table></figure><h4 id="使用vue加载"><a href="#使用vue加载" class="headerlink" title="使用vue加载"></a>使用vue加载</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vue.use(VueRouter)</span><br></pre></td></tr></table></figure><h4 id="一个简单的小例子："><a href="#一个简单的小例子：" class="headerlink" title="一个简单的小例子："></a>一个简单的小例子：</h4><p>除了前面的安装方面的区别之外，其他的几乎没有什么区别了，要是有区别的话也只是在组件的定义方面存在区别，来看一个简单的小例子：</p><ul><li><p>这是网页文件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">href</span>=<span class="string">"data:image/ico;base64,aWNv"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>这是入口文件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="comment">//如果涉及到很多的路由组件，可以将这些路由组件单独放到一个js文件当中，然后就只要引入这一个js文件就可以引入所有的路由组件。</span></span><br><span class="line"><span class="keyword">import</span> login <span class="keyword">from</span> <span class="string">'./login.vue'</span></span><br><span class="line"><span class="keyword">import</span> register <span class="keyword">from</span> <span class="string">'./register.vue'</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/'</span>, <span class="attr">redirect</span>: <span class="string">'/login'</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/login'</span>, <span class="attr">component</span>: login &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">'/register'</span>, <span class="attr">component</span>: register &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">'#app'</span>,</span><br><span class="line">  render: <span class="function"><span class="params">c</span> =&gt;</span> c(App),</span><br><span class="line">  router,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li><li><p>这是render的组件：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//定义模板</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;router-link to=<span class="string">"/login"</span>&gt;登录&lt;<span class="regexp">/router-link&gt;</span></span><br><span class="line"><span class="regexp">    &lt;router-link to="/</span>register<span class="string">"&gt;注册&lt;/router-link&gt;</span></span><br><span class="line"><span class="string">    &lt;router-view&gt;&lt;/router-view&gt;</span></span><br><span class="line"><span class="string">  &lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">// 定义业务逻辑</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">export default &#123;</span></span><br><span class="line"><span class="string">  //通过export default来向外暴露</span></span><br><span class="line"><span class="string">  data() &#123;</span></span><br><span class="line"><span class="string">    return &#123;</span></span><br><span class="line"><span class="string">      msg: "</span>这是一条消息<span class="string">"</span></span><br><span class="line"><span class="string">    &#125;;</span></span><br><span class="line"><span class="string">  &#125;</span></span><br><span class="line"><span class="string">&#125;;</span></span><br><span class="line"><span class="string">&lt;/script&gt; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">//定义样式</span></span><br><span class="line"><span class="string">&lt;style&gt;</span></span><br><span class="line"><span class="string">&lt;/style&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>login组件：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;这是登录组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped &gt;</span><br><span class="line">div &#123;</span><br><span class="line">  color: beige;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li><li><p>register组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h1&gt;这是注册组件&lt;/h1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul><p>可以看出用法还是和以前差不多，只不过用来一些新东西而已，每个组件都是一个单独的vue文件。</p><h3 id="单独的-vue文件"><a href="#单独的-vue文件" class="headerlink" title="单独的.vue文件"></a>单独的<code>.vue文件</code></h3><p>前面已经看到了 .vue 是如何使用了，那么现在来详细讲一讲这类文件的一些细节：</p><ul><li><p>可以看出 .vue 文件主要分成三部分，一部分是模板部分，这个是组件的模板，就像是原先直接在html中通过<strong>template</strong>标签定义模板那样，并且也是一样的用法，只不过是换了一个地方使用。</p></li><li><p>第二个是<strong>script</strong>部分，这个是用来处理业务逻辑的部分，其实就是一个vue的实例的对象，只不过需要通过<code>export default</code>将其暴露出去。</p></li><li><p>第三个部分就是样式部分，这个部分就更好理解了，是用来定义组件的样式的，但是又两点要注意：</p><ul><li>可以设置书写样式的语言：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;style lang=&quot;less&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;style lang=&quot;sass&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>可以通过这个lang属性来设置语言，如果不设置默认就是css.</p><ul><li><p>可以设置样式的作用域：</p><p>默认是全部生效的作用域，什么意思呢，就是在这种情况下设置的样式会应用到页面中所有符合条件的元素上。</p><p>通常情况下会这样设置：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>加一个<code>scope</code>属性就只对当前组件有效。</p></li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>看到这里就明白vue的组件化开发的便利之处了，把网页当成若干个组件，方便维护管理，并且有着很高的可复用性，并且本身就是只关心业务逻辑，使得开发简化，佩服佩服。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;前面学习过了vue的一些基础的知识，但是都是直接开发，并没有使用webpack这样的打包工具，那么该如何通过webpack来开发一个vue项目呢，并且这样与直接开发有什么不一样的地方呢，就让我们来学习一下。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>webpack的基本使用</title>
    <link href="https://q32757468.github.io/2019/07/25/webpack%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/"/>
    <id>https://q32757468.github.io/2019/07/25/webpack的基本使用/</id>
    <published>2019-07-25T14:43:46.000Z</published>
    <updated>2019-08-22T08:13:58.479Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。这是webpack中文文档中的一段话。合理的使用好webpack可以使我们模块化开发以及后期的维护更加的便利，这也是webpack会是现在比较流行的打包工具之一，这篇博客就将介绍webpack的基本用法。<br><a id="more"></a></p></blockquote><h3 id="npm的使用"><a href="#npm的使用" class="headerlink" title="npm的使用"></a>npm的使用</h3><p>如果对于npm还不是特别的熟练或者是了解可以先看一看这一部分的内容，来讲一讲npm的使用，npm是一款基于node.js的包管理工具，我们项目中用到的许多包都可以通过npm来安装到项目中然后加以使用，先来说一说简单的命令：</p><ul><li><p>首先是在项目中使用<code>npm init</code>来生成一个<strong>package.json</strong>这个配置文件中保存的是项目信息，也可以通过使用<code>npm init -y</code>来快速的生成一个package,但是要注意的一点是如果当前项目所在的文件名称中包含中文，那么就不能快速创建package文件，在手动配置时需要将项目名称命名为非中文的名称，这里简单的介绍npm，就不详细解释package中的内容了。</p></li><li><p>npm安装模块的基本语法：<code>npm install &lt;Module Name&gt;</code>，其中<code>install</code>可以简写为一个<code>i</code>，如果不加模块名称则安装所有package中保存有信息的包.</p></li><li><p>可以通过<code>npm uninstall &lt;Module Name&gt;</code>来卸载已经安装模块。</p></li><li><p>可以通过<code>npm update &lt;Module Name&gt;</code>来更新已经安装模块。</p></li><li><p>可以使用<code>npm install &lt;Module Name&gt;  -g</code>来全局安装模块，没有<code>-g</code>则只是安装在项目中。</p></li><li><p>可以通过<code>npm install npm -g</code>命令升级npm来保持npm是最新版本。</p></li><li><p>切换包的仓库，默认的npm的包的仓库是在国外的，所以国内访问的话就会有较大的延迟，所以会导致下载速度较慢，这里提供一种较简单的切换包的仓库的办法：<br><code>npm i nrm -g</code>安装<strong>nrm</strong>这样一个工具，然后通过<code>nrm ls</code>可以查看所有支持的包的仓库名称，通过<code>nrm use taobao</code>则可以切换仓库地址，这里就以淘宝镜像为例。这样下载速度就可以有很明显的提升。</p></li><li><p><code>npm install &lt;Module Name&gt;  -S</code>与<code>npm install &lt;Module Name&gt;  -D</code>的区别，首先弄懂这二者之间的区别要先了解到<code>-D</code>是<code>--save</code>的缩写，而 <code>-D</code>是<code>--save-dev</code>的缩写，这二者之间的区别就在于<code>-S</code>会将包的信息保存到<strong>package</strong>的“dependencies”中，而<code>-D</code>则将保存到“devDependencies”中。而这二者之间的区别就在于如果是“dependencies”中的包是项目发布或者是运行时所依赖的包，而“devDependencies”中的包则是开发时说要用到的包。总的来说就是像jQuery这种在运行时就需要用到的包就需要通过<code>npm install &lt;Module Name&gt;  -S</code>来安装，而在开发过程中使用的工具，就像webpack这样的就是使用<code>npm install &lt;Module Name&gt;  -D</code>来安装，因为发布运行时并不依赖这些开发工具。</p></li><li><p>这里在简单介绍一下npx<br>npx 是在npm中的一种安装工具，在npm 5.2.0的版本的时候就已经开始默认安装了，那么这个工具究竟是干什么的呢。</p><ul><li><p>我们都知道可以全局安装和单独在项目中安装模块，但是只有全局安装时才可以直接使用模块提供的一些命令，如果只是在项目中安装的包则需要在<strong>package.json</strong>中配置<strong>script</strong>然后通过<code>npm run-script</code>的形式来执行命令。</p></li><li><p>那么有了npx就可以不用这么麻烦了，直接通过<code>npx &lt;command&gt;</code>就可以直接执行本地的而非全局中的命令，并且如果项目中没有安装相应的包则会先帮你安装，十分的便利。</p></li></ul></li></ul><p>这里就介绍一些我平时可能用的比较多的一些命令，其他的就不详细介绍了，开始介绍webpack的使用。</p><h3 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h3><ul><li><p>先在项目文件夹中初始化一下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init -y</span><br></pre></td></tr></table></figure></li><li><p>在创建两个文件夹dist和src,dist存放打包后的文件，src放源文件。</p></li><li><p>安装webpack</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i webpack webpack-cli -D</span><br></pre></td></tr></table></figure></li></ul><p>由于这里使用的webpack只是一个项目的构建工具，所以使用<code>-D</code>的形式来安装，并且由于后面一些插件需要项目本地安装webpack，所以这里就没有使用全局安装。</p><h3 id="webpack的初步使用"><a href="#webpack的初步使用" class="headerlink" title="webpack的初步使用"></a>webpack的初步使用</h3><p>这里通过引入jQuery来简单的使用一下webpack：</p><ul><li><p>在src文件夹中创建两个文件index.html和index.js，并且引入：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"test"</span>&gt;</span>这是一段文字<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../dist/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>这里以使用jQuery为例，如果我们不使用webpack进行打包，那么我们要使用jQuery就必须在页面中还要引入jQuery，这样会造成二次加载，造成不必要的资源浪费，所以我们可以使用ES6中的引入模块的语法，在index.js中引入jQuery模块。</p><ul><li><p>先安装jQuery，由于时运行时也需要的依赖，所以通过<code>-S</code>的方式来安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i jquery -S</span><br></pre></td></tr></table></figure></li><li><p>引入jQuery，并且进行一些操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></span><br><span class="line">$(<span class="string">'.test'</span>).html(<span class="string">'这是一段新的文字'</span>);</span><br></pre></td></tr></table></figure></li></ul></li><li><p>但是通过上面这些操作是会直接报错的，因为浏览器目前还不支持这样的使用语法。这也是为什么要使用webpack的原因之一，通过webpack就可以将这文件打包，并且将其中的新语法进行转换，从而使得浏览器能够运行。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ npx webpack ./src/index.js -o ./dist/bundle.js --mode development</span><br><span class="line">(这里也可以配置package中的script来简化操作命令)</span><br></pre></td></tr></table></figure></li></ul><p>此时原来报错的js文件就打包好了，打包好的新的名为bundle.js的文件就存放在dist文件夹中，我们需要在html中引入新的js文件</p><blockquote><p>这里的mode可以不配置，默认时producition模式，后面可以在配置文件中进行配置。</p></blockquote><ul><li>引入好打包好的js文件再次打开网页就可以发现并不会再报错了，并且可以正确的执行相关操作，这样就进行好了一次简单的打包。</li></ul><h3 id="webpac配置文件"><a href="#webpac配置文件" class="headerlink" title="webpac配置文件"></a>webpac配置文件</h3><p>webpack的相关配置都是通过配置<strong>webpack.config.js</strong>这个文件来实现的，这个文件默认没有，需要自己手动的创建，并且放在项目的根目录中。</p><p>我们可以先做一下简单的配置：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 导入处理路径的模块</span></span><br><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="comment">//配置信息</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: path.resolve(__dirname, <span class="string">'src/index.js'</span>), <span class="comment">// 项目入口文件</span></span><br><span class="line">  output: &#123; <span class="comment">// 配置输出选项</span></span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'dist'</span>), <span class="comment">// 配置输出的路径</span></span><br><span class="line">    filename: <span class="string">'bundle.js'</span> <span class="comment">// 配置输出的文件名</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">//配置模式：development、production none 三选一</span></span><br><span class="line">  mode: <span class="string">'development'</span> <span class="comment">//开发过程中使用development、发布时使用production。</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>通过这样简单的配置我们再次打包时所用的命令就会更加的简单了，因为配置都写在了配置文件中：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx webpack</span><br></pre></td></tr></table></figure></p><p>通过配置好相关的配置文件，就可以在执行命令的时候就不用再加上相应的配置了。</p><h3 id="使用插件"><a href="#使用插件" class="headerlink" title="使用插件"></a>使用插件</h3><p>通过上面的例子我们会发现这样打包其实也是不够便捷的，那么我们可以通过安装插件来使我们的使用更加的便捷。</p><h4 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h4><p>这款插件的作用就是不再需要我们自己手动的去打包，使用了这款插件以后当我们保存代码以后就会进行自动打包，使我们的开发更加的便利。</p><h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i webpack-dev-server -D</span><br></pre></td></tr></table></figure><h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><p>可以通过<code>$ npx webpack-dev-server</code>来启动服务</p><h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><ul><li>首先我们可以通过配置package中的script来简化我们的命令：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;,</span><br><span class="line">  &quot;dev&quot;: &quot;webpack-dev-server&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>这样设置以后我们就可以通过<code>npm run dev</code>来简化操作了。</p><ul><li>我们可以配置webpack-dev-server来更进一步的简化我们的操作，有两种方式：</li></ul><p>方式一：<br>修改<strong>package.josn</strong>中的命令来配置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;dev&quot;: &quot;webpack-dev-server --hot --port 4321 --open --contentBase src&quot;</span><br></pre></td></tr></table></figure></p><p>这里解释一下这些配置都是什么含义：</p><ul><li><p><code>--hot</code> 启用热更新</p></li><li><p><code>--port 4321</code>修改端口为4321</p></li><li><p><code>--open</code> 自动打开浏览器</p></li><li><p><code>--contentBase src</code>默认打开的是src文件夹而不是项目跟路径</p></li></ul><p>方式二：<br>配置<strong>webpack.config.js</strong></p><ol><li><p>头部引入webpack包：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const webpack = require(&apos;webpack&apos;);</span><br></pre></td></tr></table></figure></li><li><p>在module.exports新增配置信息：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  hot: <span class="literal">true</span>,</span><br><span class="line">  open: <span class="literal">true</span>,</span><br><span class="line">  port: <span class="number">4321</span>,</span><br><span class="line">  contentBase: <span class="string">'src'</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>在 plugins 数组中新增：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  new webpack.HotModuleReplacementPlugin()</span><br><span class="line">],</span><br></pre></td></tr></table></figure></li></ol><h5 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h5><p>这样配置好后再继续使用确实是会简便很多，但是启动之后我们还是能够发现一个问题，那就是似乎启动之后的页面并没有得到我们想要的结果，那么问题处在哪里呢，其实这是因为通过<strong>webpack-dev-server</strong>启动打包的js文件并不是我们手动打包生成的那个js文件，并且原来我们手动打包生成的那个js文件也已经无效了，而通过 webpack-dev-server 打包生成的js文件是存放在内存中的，路径是在项目的根路径中，所以解决这个问题的方法有三种。</p><ol><li><p>修改网页的引用路径：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>修改 webpack-dev-server 配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  publicPath: &quot;/dist/&quot;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>使用 html-webpack-plugin 插件<br>后面详细介绍这款插件，这里就不做过多介绍。</p></li></ol><h4 id="html-webpack-plugin"><a href="#html-webpack-plugin" class="headerlink" title="html-webpack-plugin"></a>html-webpack-plugin</h4><p>前面说到了在使用 webpack-dev-server 出现的问题，也提到了这个问题也可以通过 <strong>html-webpack-plugin</strong> 这款插件来解决，那么来看看如何使用这款插件：</p><h5 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm i html-webpack-plugin -D</span><br></pre></td></tr></table></figure><h5 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h5><ul><li><p>导入模块</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">const htmlWebpackPlugin = require(&apos;html-webpack-plugin&apos;);</span><br></pre></td></tr></table></figure></li><li><p>添加到 plugins 数组中</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  new htmlWebpackPlugin(&#123;</span><br><span class="line">    template: path.resolve(__dirname, &apos;src/index.html&apos;),//源文件路径</span><br><span class="line">    filename: &apos;index.html&apos;//自动生成的HTML文件的名称</span><br><span class="line">  &#125;)</span><br><span class="line">],</span><br></pre></td></tr></table></figure></li></ul><p>配置好以后就可以使用了，那么这款插件是起什么作用的呢，前面提到了 webpack-dev-server 插件会将js文件生成到根路径内存中，那么 html-webpack-plugin 这款插件也是类似的，将html文件生成到内存中，并且会将页面中原本对js的引用失效，换成对内存中在根路径的js文件的引用，刚好也解决了前面插件的问题，同时存放在内存中也能够提高运行速度，并且会在output.path的路径中生成一份由我们命名的html文件，方便管理，并且这个新生成的文件会自动引入入口js文件，所以在源文件中就要把原来对入口文件的引用去掉。</p><h3 id="loaders"><a href="#loaders" class="headerlink" title="loaders"></a>loaders</h3><p>loader 用于对模块的源代码进行转换。当源代码中引入了非js模块的时候就有可能会出现无法打包的情况，这是因为webpack默认是无法处理除了js之外的文件的，那么此时就要用到各种各样的loader来帮助我们处理这些文件或者模块了。</p><h4 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h4><p>在一个前端项目中我们除了js之外最长用到的应该就是css文件了，如果直接在入口文件中引入css文件的话在打包的时候就会报错，这是后就需要用相应的loader来处理了。</p><p>像是这样直接使用就会报错：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> $ <span class="keyword">from</span> <span class="string">'jquery'</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./index.css'</span> </span><br><span class="line">$(<span class="string">'.test'</span>).html(<span class="string">'这是一段新的文字'</span>);</span><br></pre></td></tr></table></figure></p><p>那么来看看如何使用 css loader：</p><ol><li><p>先是通过<code>$ npm i style-loader css-loader -D</code>来安装两个需要的loader</p></li><li><p>然后再到配置文件中进行相应的配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123; <span class="comment">// 用来配置第三方loader模块</span></span><br><span class="line">  rules: [ <span class="comment">// 匹配规则</span></span><br><span class="line">    &#123; <span class="attr">test</span>: <span class="regexp">/\.css$/</span>, <span class="attr">use</span>: [<span class="string">'style-loader'</span>, <span class="string">'css-loader'</span>] &#125;<span class="comment">//处理css文件的规则</span></span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>test 就是相应要匹配的文件，这里使用的是正则表达式，表示匹配的是以 .css 结尾的文件。use是一个表示要用什么loader来处理前面 test 匹配的文件。</p></blockquote><h4 id="less-loader"><a href="#less-loader" class="headerlink" title="less-loader"></a>less-loader</h4><p>less-loader 与css-loader类似，只不过是用来处理less文件的：</p><ol><li>通过<code>npm i less-loader less -D</code> 来安装。</li></ol><p>2.设置匹配规则：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; test: /\.less$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;, &apos;less-loader&apos;] &#125;,</span><br></pre></td></tr></table></figure></p><h4 id="sass-loader"><a href="#sass-loader" class="headerlink" title="sass-loader"></a>sass-loader</h4><p>sass-loader 与css-loader类似，只不过是用来处理scss文件的：</p><ol><li>通过<code>npm i sass-loader node-sass --D</code></li></ol><p>2.设置匹配规则：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; test: /\.scss$/, use: [&apos;style-loader&apos;, &apos;css-loader&apos;, &apos;sass-loader&apos;] &#125;</span><br></pre></td></tr></table></figure></p><h4 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h4><p>当我们通过url地址引用一些图片或者是字体图标的时候，webpack默认也是处理不了的，这个时候我们就需要使用到<strong>file-loader</strong>了：</p><p>比如在css中设置背景图片时：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.test</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: aqua;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">url</span>(./images/1.png);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>使用 file-loader ：</p><ol><li>通过<code>$ npm i file-loader -D</code>安装</li></ol><p>2.设置匹配规则：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(png|jpg|gif)$/</span>, <span class="attr">use</span>: <span class="string">'file-loader?name=[name].[ext]'</span> &#125;,   <span class="comment">//匹配图片，并且设置参数图片名称为图片原本名称加上原本后缀名</span></span><br><span class="line">&#123; <span class="attr">test</span>: <span class="regexp">/\.(ttf|eot|svg|woff|woff2)$/</span>, <span class="attr">use</span>: <span class="string">'file-loader'</span> &#125;,<span class="comment">//匹配字体</span></span><br></pre></td></tr></table></figure></p><p>可以像这样设置参数，具体有哪些选项并且有什么作用可以看<a href="https://www.webpackjs.com/loaders/file-loader/" target="_blank" rel="noopener">这里</a>。</p><h4 id="其他loader"><a href="#其他loader" class="headerlink" title="其他loader"></a>其他loader</h4><p>还有其他的一些loader这里就不一一介绍了，在有需要的情况下可以选择安装，这里是<a href="https://www.webpackjs.com/loaders/" target="_blank" rel="noopener">官方文档</a>。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>webpack是一款非常优秀的打包工具，这篇博客的例子非常简单，只演示了单入口单页面的情况，但是我们已经可以看出使用webpack带来的便利了，所有的资源全部被打包在了<code>output.path</code>目录中，也可以通过配置<strong>file-loader</strong>将图片之类的资源放在单独的子目录中在图片多的情况下方便管理。</p><p>最后再讲一下publicPath，这个的作用就是设置文件最终输出时的相对路径前面的路径。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;webpack 是一个现代 JavaScript 应用程序的静态模块打包器(module bundler)。当 webpack 处理应用程序时，它会递归地构建一个依赖关系图(dependency graph)，其中包含应用程序需要的每个模块，然后将所有这些模块打包成一个或多个 bundle。这是webpack中文文档中的一段话。合理的使用好webpack可以使我们模块化开发以及后期的维护更加的便利，这也是webpack会是现在比较流行的打包工具之一，这篇博客就将介绍webpack的基本用法。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>理解JS中的执行环境</title>
    <link href="https://q32757468.github.io/2019/07/21/%E7%90%86%E8%A7%A3JS%E4%B8%AD%E7%9A%84%E6%89%A7%E8%A1%8C%E7%8E%AF%E5%A2%83/"/>
    <id>https://q32757468.github.io/2019/07/21/理解JS中的执行环境/</id>
    <published>2019-07-21T11:18:41.000Z</published>
    <updated>2019-07-25T09:32:46.937Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;执行环境（execution context）也有翻译为执行上下文，这是JS中非常基础但是也非常重要的一个概念，通过理解执行环境我们可以更加了解js的运作机制。<br><a id="more"></a></p></blockquote><h3 id="什么是执行环境"><a href="#什么是执行环境" class="headerlink" title="什么是执行环境"></a>什么是执行环境</h3><p><strong>执行环境</strong>定义了变量或函数有权访问的其他数据，决定了它们各自的行为。这是高级编程中的一句话。</p><p>说简单点理解，<strong>执行环境</strong>其实就是一个环境，在这个环境中保存了一些重要的数据。</p><p>每个函数都有自己的<strong>执行环境</strong>，此外还存在一个全局的执行环境，在web浏览器中，该执行环境被认为是window对象（因为所有的属性和方法都是window对象创建的）。</p><p>当<strong>执行环境</strong>中的所有代码执行完毕后，该执行环境就会被销毁，退出执行栈。（全局执行环境直到浏览器关闭才会被销毁）</p><h3 id="执行环境与执行栈"><a href="#执行环境与执行栈" class="headerlink" title="执行环境与执行栈"></a>执行环境与执行栈</h3><p>要理解执行环境我们还需要了解一个概念：<strong>执行栈</strong>。我们都知道栈是一种LIFO（Last-In-First-Out）的数据结构，也就是后进先出。</p><p>通过我前面的关于js事件循环机制的文章现在我们可以知道，当js执行到非异步的函数的时候会立马将该函数推入到执行栈中，那么现在我们可以知道被推入执行栈的是该函数的执行环境,当函数执行完毕就会被弹出，也就是执行环境被销毁，然后根据执行流继续执行后面的代码。</p><p>到这里我相信执行环境的基本概念已经有了，也就是在执行某一函数时的环境，当函数执行完毕该环境就会被销毁。</p><p>现在我们可以通过一个例子来更加形象的理解执行栈与执行环境：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function foo() &#123;</span><br><span class="line">  console.log(&apos;csznb&apos;);</span><br><span class="line">  function bar() &#123;</span><br><span class="line">    console.log(&apos;cszsfyq&apos;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">function baz() &#123;</span><br><span class="line">  console.log(&apos;cszfcs&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>我们可以通过图片方便理解：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/zfAwo9zxnj2TpvYz6yNVcFum7BaXmPIokG4SckB0snM!/b/dLYAAAAAAAAA&bo=WgQtAgAAAAADB1M!&rf=viewer_4"></p><ul><li><p>通过图片我们就可以很直观的理解执行栈与执行环境了。</p></li><li><p>在开始执行foo函数之前，执行栈中就只有全局的执行环境，</p></li><li><p>当执行到foo函数就会把其执行环境推入执行栈中执行其中的代码，</p></li><li><p>当执行到bar函数则把bar函数的执行环境推入到执行栈中，由于此时这两个函数都还没有执行完毕，所以这两个函数的执行环境都存在于执行栈中，</p></li><li><p>当执行完bar函数中的代码，bar函数的执行环境就被弹出，foo函数的代码也意味着执行完毕，执行环境也被弹出，</p></li><li><p>接着开始执行baz函数，将其执行环境推入执行栈中，当执行完函数中的代码则被弹出，</p></li><li><p>最后只剩下一个全局执行环境，当浏览器关闭，全局执行环境也被销毁。</p></li></ul><h3 id="执行环境中的内容"><a href="#执行环境中的内容" class="headerlink" title="执行环境中的内容"></a>执行环境中的内容</h3><p>前面也提到了执行环境其实就是一个环境，其中保存了重要的数据，那么究竟保存的是什么数据呢？</p><ul><li><p>首先执行环境中很重要的一部分就是<strong>变量对象</strong>，在执行环境的创建时就会建立活动对象。</p></li><li><p>执行环境中还保存了<strong>作用域链</strong>，当代码在一个环境中执行时，会创建变量对象的一个作用域链。</p></li><li><p>另外在执行环境中还确定了<strong>this的指向</strong>。</p></li></ul><p>关于这三者的详细理解这里我就不介绍了，后面会些专门的文章来解释。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>当执行到一个函数，该函数的执行环境就会被推入执行栈，当这个函数完全执行完毕执行环境就会被弹出执行栈。全局执行环境一开始就存在与执行栈之中，只有当浏览器关闭才会被销毁。</p><p>这里只介绍了一些关于执行环境基本的知识，后面还会有更加详细的关于变量对象以及作用域链的理解。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;执行环境（execution context）也有翻译为执行上下文，这是JS中非常基础但是也非常重要的一个概念，通过理解执行环境我们可以更加了解js的运作机制。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS原型与原型链以及继承</title>
    <link href="https://q32757468.github.io/2019/07/19/JS%E5%8E%9F%E5%9E%8B%E9%93%BE%E4%B8%8E%E7%BB%A7%E6%89%BF/"/>
    <id>https://q32757468.github.io/2019/07/19/JS原型链与继承/</id>
    <published>2019-07-19T10:46:26.000Z</published>
    <updated>2019-07-20T10:31:45.507Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;在js对象中有一个非常重要的概念，就是原型，通过原型模式创建对象就可以共享特定的属性以及方法，合理的使用就可以减少代码量以及减少资源的消耗。这里提到原型就不得不提一下原型搜索机制：当以读取模式访问一个实例属性时，首先会在实例中搜索该属性。如果没有找到该属性，则会继续搜索实例的原型，这是在没有原型链的情况下，在通过原型链实现继承的情况下，搜索过程就得以沿着原型链继续向上。实际上原型链就是扩展了原型的搜索范围。而原型链的产生主要是通过继承来实现，这就是原型与原型链及继承这三者之间的关系。<br><a id="more"></a></p></blockquote><h3 id="原型与原型对象"><a href="#原型与原型对象" class="headerlink" title="原型与原型对象"></a>原型与原型对象</h3><p>在理解原型链与继承之前需要理解原型与原型对象的概念：</p><ul><li><p>我们都知道，我们创建的每一个函数都拥有一个<code>prototype</code>属性，这个属性的属性值是一个指针，指向一个对象，而这个对象就是原型对象，其中保存了我们定义的所有在原型上的属性或者方法，那么只要是在原型对象当中，那么这个函数的所有实例就可以访问到其中的属性或者方法，所以所这些属性和方法是共享的。</p></li><li><p>在原型对象当中，有一个属性叫做<code>constructor</code>，这个属性的属性值是一个指针，指向了当初添加了原型的那个函数。</p></li><li><p>当调用了函数创建了一个实例对象的时候，这个实例内部又还会有一个属性，这个属性是一个指针叫做<code>[[prototype]]</code>，而这个指针就指向了原型对象,对于这个属性的访问没有定义相关的标准，但是在Firefox、chrome、safari中每个实例对象都可以看到一个<strong>proto</strong>属性，其它浏览器则是完全不可见。</p></li><li><p>构造函数、原型、原型对象这三者之间的关系可以这样理解（假设有一个Person构造函数并且有相应的原型对象）：<br><img src="http://m.qpic.cn/psb?/V131x4904WMIoW/l1zNaitxZQ3jFWO5QacsM47xsgfZLDvec*pb00eWCOM!/b/dMMAAAAAAAAA&bo=IQWHAQAAAAADB4A!&rf=viewer_4"><br>通过这张图就可以很直观的看出三者之间的关系了。</p></li></ul><blockquote><p>值得注意的一点是由于原型中查找相应的值是一次搜索过程，所以一旦修改了原型对象，所发生的改变就会立刻反映出来，实例或者构造函数中原型的值也会立刻跟着变化，无论创建的先后。</p></blockquote><blockquote><p>正如上面所提到可以修改原型对象，一旦重写了原型对象就会导致constructor的指针发生变化，如果需要则要手动设置constructor.</p></blockquote><h3 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h3><ul><li><p>ECMAScript中描述了<strong>原型链</strong>的概念，并将原型链作为实现继承的主要方法。</p></li><li><p>前面我们已经简单了解过原型的相关知识了，那么原型链其实顾名思义就像一条链条一样，这条链条上全都是各种不同的原型，而我们由前面就可以知道属性的搜索机制是先在当前实例中找，找不到再到原型中找，通过原型链连接许多不同的原型就可以扩大属性的搜索范围，这就是原型链的作用。</p></li><li><p>这是实现原型链的一种基本模式：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">  Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line">&#125;</span><br><span class="line">Test2.prototype = <span class="keyword">new</span> Test1();</span><br><span class="line"><span class="keyword">const</span> obj = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="built_in">console</span>.log(obj.name1);<span class="comment">//通过原型链访问到Test1 csz1</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name2);<span class="comment">//通过原型链访问到Test2 csz2</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name3);<span class="comment">//在实例中找到          csz3</span></span><br><span class="line"><span class="built_in">console</span>.log(obj.name4);<span class="comment">//在原型中找到          csz4</span></span><br></pre></td></tr></table></figure></li></ul><p>可以看出通过手动将Test1构造函数的实例绑定到Test2的原型上形成一条原型链，Test2的实例就可以通过原型链访问到Test1实例中的属性以及原型中的属性。</p><p>这条原型链可以简单的像这样表示：<br><code>obj[[prototype]] =&gt; Test2.prototype =&gt; new Test1() =&gt; Test1.prototype =&gt; Object.prototype</code></p><blockquote><p>需要注意的一点是在设置原型的时候最好不要通过对象字面量来创建<code>原型方法</code>，这会导致重写原型链，从而致使原型链被切断。</p></blockquote><h3 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h3><p> 许多OO语言都支持两种继承模式，接口继承与实现继承，ECMAScript则只支持实现继承，并且将原型链作为实现继承的主要方法。</p><p> 通过上面对原型链的理解，我们也知道如何通过原型链来实现继承（主要就是通过搜索机制）。</p><p> 主要有六种继承的方式：</p><h4 id="一、通过原型链来实现继承"><a href="#一、通过原型链来实现继承" class="headerlink" title="一、通过原型链来实现继承"></a>一、通过原型链来实现继承</h4><ul><li><p>通过上面原型链的例子我们知道可以通过将一个构造函数的实例设置给另一个构造函数的原型通过原型链来实现继承，并且可以看出原型链的作用十分强大。</p></li><li><p>但是直接通过原型链来实现继承也存在一些问题，我们可以看看下面这个例子：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">  Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//将Test的原型设置为Test1的实例，这条语句必须写在Test2外面</span></span><br><span class="line">Test2.prototype = <span class="keyword">new</span> Test1();</span><br><span class="line">Test2.prototype.constructor = Test2;</span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line">obj1.arr.push(<span class="number">999</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1.arr);  <span class="comment">//[1, 2, 3, 4, 5, 6, 999]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);  <span class="comment">//[1, 2, 3, 4, 5, 6, 999]</span></span><br></pre></td></tr></table></figure></li></ul><p>可以看出当我们通过 obj1 这个实例修改了数组 arr 中的值，结果导致 obj2 中数组 arr 中的值也一起跟着修改了，那么为什么会出现这样的结果呢，其实我们不难发现当我们在执行这条语句的时候<code>Test2.prototype = new Test1();</code>是直接将一个实例设置给了 Test2的原型，这就会导致原本在Test1实例属性中的数组到了Test2中就变成了原型中的数组，那么就相当于在Test2的原型中设置了一个引用类型的属性一样，我们都知道原型对象中的属性相当于是共享的，所以结果可想而知。很明显得不到我们想要的结果。这是其中的一个问题。</p><ul><li>还有一个问题则是在创建子类型实例时无法很完美的给超类型传递参数（虽然可以传递，但会影响到所有的实例）。所以实践当中不推荐使用这种方式来实现继承。</li></ul><h4 id="二、借用构造函数"><a href="#二、借用构造函数" class="headerlink" title="二、借用构造函数"></a>二、借用构造函数</h4><p>为了解决上面出现的这些问题，开发人员开始使用一种叫做<strong>借用构造函数（constructor stealing）</strong>的技术，使用起来也很简单，在子类型构造函数中调用超类型构造函数就可以实现。</p><ul><li>可以传递参数：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params">money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//借用了Test构造函数，并且可以通过call或者aplly方法来传递参数并改变this指向</span></span><br><span class="line">  Test1.call(<span class="keyword">this</span>, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">  Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="built_in">console</span>.log(obj2.money);  <span class="comment">//1000</span></span><br></pre></td></tr></table></figure></li></ul><p>通过这个例子可以看出通过借用构造函数可以实现参数的正常传递，获取到相对应的值。</p><blockquote><p>为了确保子类型的属性不被借用来的构造函数重写，应该确保将子类型的属性写在借用来的超类型构造函数之后。</p></blockquote><ul><li>子类型实例间不会相互影响：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params">money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">  Test1.call(<span class="keyword">this</span>, <span class="number">1000</span>);</span><br><span class="line">  Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line">obj1.arr.push(<span class="number">999</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1.arr);<span class="comment">//1, 2, 3, 4, 5, 6, 999]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);<span class="comment">//[1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure></li></ul><p>可以看出由于借用来的属性全在构造函数当中，不在原型当中，所以不会出现引用类型的数据相互影响的情况。</p><h5 id="借用构造函数存在的问题"><a href="#借用构造函数存在的问题" class="headerlink" title="借用构造函数存在的问题"></a>借用构造函数存在的问题</h5><p>由于借用构造函数借来的属性以及方法全都是在构造函数的实例当中，所以单纯的这种方式就无法访问到超类型的原型上的属性和方法:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params">money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">  Test1.call(<span class="keyword">this</span>, <span class="number">1000</span>);</span><br><span class="line">  Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line">obj1.arr.push(<span class="number">999</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1.arr);<span class="comment">//1, 2, 3, 4, 5, 6, 999]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);<span class="comment">//[1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.name2);<span class="comment">//undefined</span></span><br></pre></td></tr></table></figure></p><p>可以看出访问存在于超类型构造函数原型中的属性是访问不到的，所以单纯的借用构造函数也是不推荐使用的。</p><h4 id="三、组合继承"><a href="#三、组合继承" class="headerlink" title="三、组合继承"></a>三、组合继承</h4><p>为了解决前面提到的两种方法的缺点，就出现了组合继承，组合继承简单来说就是将通过<strong>原型链</strong>来继承和通过<strong>借用构造函数</strong>来继承这两方法进行组合，互相取长补短，发挥二者的优势，以达到一个较好的继承效果。其实现思路是通过<strong>原型链</strong>的方式来继承超类型原型上的属性和方法，通过<strong>借用构造函数</strong>来继承超类型中构造函数上的属性和方法。</p><p>来看看具体是怎么实现的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params">money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'这是test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通过借用构造函数来继承实例中的属性和方法</span></span><br><span class="line">  Test1.call(<span class="keyword">this</span>, <span class="number">999</span>);</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//通过原型链来继承超类型构的原型</span></span><br><span class="line">Test2.prototype = <span class="keyword">new</span> Test1();</span><br><span class="line">Test2.prototype.constructor = Test2;</span><br><span class="line">Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="built_in">console</span>.log(obj1.name2);<span class="comment">//csz2</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.money);<span class="comment">//999</span></span><br><span class="line">obj1.arr.push(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1.arr);<span class="comment">// [1, 2, 3, 4, 5, 6, 666]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);<span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure></p><p>从结果可以看出使用<strong>组合继承</strong>成功的集合了原型链继承和借用构造函数继承的优点，同时弥补了二者的缺点，是一种比较实用的继承方式，推荐使用。</p><blockquote><p>组合继承也并不是完全没有缺点，也存在一些小问题，像是要调用两次超类型构造函数，存在资源的浪费，但是问题不大，后面会介绍一种更加完美的继承方式，到时再详细介绍。</p></blockquote><h4 id="四、原型式继承"><a href="#四、原型式继承" class="headerlink" title="四、原型式继承"></a>四、原型式继承</h4><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;原型式继承由道格拉斯·克罗克福德在2006年写了一篇文章，题为Prototypal Inheritance in JavaScript （JavaScript中的原型式继承）中介绍，他介绍了一种实现继承的方法，这种方法并没有使用严格意义上的构造函数。他的想法是借助原型可以基于已有的对象创建新对象，同时还不必因此创建自定义类型。为了实现这个目的，他给出了如下函数：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123; </span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>)</span>&#123;&#125; </span><br><span class="line">  F.prototype = o; </span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F(); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><ul><li><p>通过这个函数就可以看出其实这个函数的作用就是将一个已有的对象转化为一个中间构造函数的原型对象，最后通过这个函数来返回新的实例，而这个新的实例则是这个在函数中的构造函数的实例，所以新的实例就会将我们传递给函数的这个对象当作原型对象。</p></li><li><p>从本质上来说，object()函数对传入其的对象进行了一次浅复制。</p></li><li><p>简单一点理解就是通过这个函数可以返回一个新的对象，返回的所有新对象共享传递给函数的对象作为原型对象。与原型链模式类似，所以在在使用引用类型的数据的时候需要格外注意。</p></li></ul><p>我们可以通过一个例子来理解：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line">  F.prototype = o;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F();</span><br><span class="line">&#125;</span><br><span class="line">obj1 = &#123;</span><br><span class="line">  name: <span class="string">'csz1'</span>,</span><br><span class="line">  age: <span class="number">56</span>,</span><br><span class="line">  arr: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = object(obj1);</span><br><span class="line"><span class="keyword">const</span> obj3 = object(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(obj2.name);<span class="comment">//csz1</span></span><br><span class="line"><span class="comment">//引用类型的数据会相互影响</span></span><br><span class="line">obj2.arr.push(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj3.arr);<span class="comment">//[1, 2, 3, 4, 5, 6, 7, 666]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);<span class="comment">//[1, 2, 3, 4, 5, 6, 7, 666]</span></span><br></pre></td></tr></table></figure></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;克罗克福德主张的这种原型式继承需要有一个对象作为基础，如果有一个现成的对象，需要根据这个对象为原型创建一个新的对象再稍作修改的话，使用这种方式就比较快速便捷。</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ECMAScript5中新增了一个<code>Object.creat()</code>方法来规范原型式继承，这个方法接收两个参数，第一个参数是一个需要作为基础的对象，第二个参数是为新对象定义额外属性的对象。</p><ul><li><p>当只传入一个参数时效果与前面的克罗克福德的object函数一样。</p></li><li><p>第二个参数的格式与可以设置新对象的额外属性，新的属性会覆盖掉作为第一个参数的那个对象的同名属性，使用格式Object.defineproperties()方法一致：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">obj1 = &#123;</span><br><span class="line">  name: <span class="string">'csz1'</span>,</span><br><span class="line">  age: <span class="number">56</span>,</span><br><span class="line">  arr: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="built_in">Object</span>.create(obj1, &#123;</span><br><span class="line">  <span class="comment">//要使用这种格式</span></span><br><span class="line">  name: &#123;</span><br><span class="line">    value: <span class="string">'csz2'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(obj2.name);<span class="comment">//csz2</span></span><br></pre></td></tr></table></figure></li></ul><p>在需要使用到原型式继承时可以直接使用<code>Object.creat()</code>会更加的便捷。</p><h4 id="五、寄生式继承"><a href="#五、寄生式继承" class="headerlink" title="五、寄生式继承"></a>五、寄生式继承</h4><p>寄生式（parasitic）继承是与原型式继承紧密相关的一种思路，并且同样也是由克罗克福德推而广之的。让我们来看看它是如何工作的：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">obj1 = &#123;</span><br><span class="line">  name: <span class="string">'csz1'</span>,</span><br><span class="line">  age: <span class="number">56</span>,</span><br><span class="line">  arr: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> clone = <span class="built_in">Object</span>.create(original);</span><br><span class="line">  clone.sayHi = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"hi"</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">return</span> clone;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> obj2 = createAnother(obj1);</span><br><span class="line"><span class="built_in">console</span>.log(obj2.sayHi());<span class="comment">//hi</span></span><br></pre></td></tr></table></figure></p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;其实可以看出寄生式继承是原型式继承的一种扩展，相当于是把<strong>原型式继承的函数</strong>以及<strong>新对象需要扩充的属性</strong>同时封装在一个函数当中。可以在需要使用原型式继承并且需要在内部扩充属性时使用。</p><blockquote><p>注意在使用寄生式继承来为对象添加方法时不能够做到函数复用，这一点类似创建对象时的造函数模式。</p></blockquote><h4 id="六、寄生组合式继承"><a href="#六、寄生组合式继承" class="headerlink" title="六、寄生组合式继承"></a>六、寄生组合式继承</h4><p>前面提到了比较完美的<strong>组合继承</strong>也存在着缺陷，两次调用超类型构造函数，并且存在着资源浪费的情况（因为原型是超类型的实例所以会存在着有属性与子类型实例重名的情况，造成不必要的资源浪费），虽然问题不大，但是有一种更加完美的继承方式，也就是<strong>寄生组合式继承</strong>。</p><p>那么 寄生组合式继承是如何解决问题的呢：</p><ul><li><p>首先，还是使用<strong>借用构造函数</strong>来实现对超类型实例中属性和方法的继承。</p></li><li><p>其次，使用<strong>原型链的混成形式</strong>来继承原型中的属性和方法。具体做法原理是使用寄生式继承来继承超类型的原型对象，将结果指定给子类型的原型，并且将<code>constructor</code>重新指会子类型。可以将这一过程封装成一个函数，并设置两个参数，一个是子类型，一个是超类型，如下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">obj1, obj2</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> prototype = <span class="built_in">Object</span>.create(obj2.prototype);  <span class="comment">//创建原型对象</span></span><br><span class="line">  prototype.constructor = obj1;                   <span class="comment">//将constructor重新指向子类型</span></span><br><span class="line">  obj1.prototype = prototype;                     <span class="comment">//修改子类型的prototype</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><p>使用 寄生组合式继承 来优化前面的组合继承的例子：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test1</span>(<span class="params">money</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name1 = <span class="string">'csz1'</span>;</span><br><span class="line">  <span class="keyword">this</span>.money = money;</span><br><span class="line">  <span class="keyword">this</span>.arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>];</span><br><span class="line">  Test1.prototype.name2 = <span class="string">'csz2'</span>;</span><br><span class="line">  Test1.prototype.fn = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">'这是test1'</span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Test2</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// 通过借用构造函数来继承实例中的属性和方法</span></span><br><span class="line">  Test1.call(<span class="keyword">this</span>, <span class="number">999</span>);</span><br><span class="line">  <span class="keyword">this</span>.name3 = <span class="string">'csz3'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//通过原型链混成形式来继承超类型构的原型</span></span><br><span class="line">inheritPrototype(Test2, Test1);</span><br><span class="line">Test2.prototype.name4 = <span class="string">'csz4'</span>;</span><br><span class="line"><span class="keyword">const</span> obj1 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="keyword">const</span> obj2 = <span class="keyword">new</span> Test2();</span><br><span class="line"><span class="built_in">console</span>.log(obj1.name2);<span class="comment">//csz2</span></span><br><span class="line"><span class="built_in">console</span>.log(obj1.money);<span class="comment">//999</span></span><br><span class="line">obj1.arr.push(<span class="number">666</span>);</span><br><span class="line"><span class="built_in">console</span>.log(obj1.arr);<span class="comment">// [1, 2, 3, 4, 5, 6, 666]</span></span><br><span class="line"><span class="built_in">console</span>.log(obj2.arr);<span class="comment">// [1, 2, 3, 4, 5, 6]</span></span><br></pre></td></tr></table></figure></p><p>可以看出依然可以得出一样的理想的结果，但是通过这种形式就不存在着资源浪费的情况，是最完美的一种继承方式。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这里着重介绍了继承的几种方式，以及优缺点，理解这六种继承方式是非常有必要的，以后就知道该使用哪种继承方式了，同时也对理解JS这门语言十分有帮助。</p><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p>《JavaScript高级程序设计(第三版)》</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;在js对象中有一个非常重要的概念，就是原型，通过原型模式创建对象就可以共享特定的属性以及方法，合理的使用就可以减少代码量以及减少资源的消耗。这里提到原型就不得不提一下原型搜索机制：当以读取模式访问一个实例属性时，首先会在实例中搜索该属性。如果没有找到该属性，则会继续搜索实例的原型，这是在没有原型链的情况下，在通过原型链实现继承的情况下，搜索过程就得以沿着原型链继续向上。实际上原型链就是扩展了原型的搜索范围。而原型链的产生主要是通过继承来实现，这就是原型与原型链及继承这三者之间的关系。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS中的高阶函数</title>
    <link href="https://q32757468.github.io/2019/07/16/JS%E4%B8%AD%E7%9A%84%E9%AB%98%E9%98%B6%E5%87%BD%E6%95%B0/"/>
    <id>https://q32757468.github.io/2019/07/16/JS中的高阶函数/</id>
    <published>2019-07-16T06:32:27.000Z</published>
    <updated>2019-07-16T07:07:03.599Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;函数是一门语言的重要组成部分，并且js中的函数还有很多特别的地方，比如函数是第一公民，那么这次来了解一下什么是高阶函数。<br><a id="more"></a></p></blockquote><h3 id="什么是高阶函数"><a href="#什么是高阶函数" class="headerlink" title="什么是高阶函数"></a>什么是高阶函数</h3><p>高阶函数的概念很简单，指的就是一个函数将另一个函数作为参数，那么这个函数就是高阶函数。<br>一个简单的高阶函数：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function sum(x, y, fn) &#123;</span><br><span class="line">  return fn(x) + fn(y);</span><br><span class="line">&#125;</span><br><span class="line">function add1(num) &#123;</span><br><span class="line">  return num += 1;</span><br><span class="line">&#125;</span><br><span class="line">console.log(sum(2, 3, add1));</span><br></pre></td></tr></table></figure></p><p>这就是一个简单的高阶函数，将一个函数作为另一个函数的参数。</p><h3 id="JS中自带的高阶函数"><a href="#JS中自带的高阶函数" class="headerlink" title="JS中自带的高阶函数"></a>JS中自带的高阶函数</h3><ul><li><p>map/reduce</p></li><li><p>filter</p></li><li><p>sort</p></li><li><p>。。。还有其他很多的方法都是高阶函数</p></li></ul><p>以上这些我们经常用的方法其实都是高阶函数，因为我们每次在使用时都需要传递一个函数作为参数。</p><h3 id="自己写一个Map函数"><a href="#自己写一个Map函数" class="headerlink" title="自己写一个Map函数"></a>自己写一个Map函数</h3><p>既然我们现在知道了什么是高阶函数，那么我们就可以自己写一个与js中自带的高阶函数类似的高阶函数出来，这里我们自己写一个类似map方法的高阶函数出来：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Array.prototype.myMap = myMap;</span><br><span class="line">function myMap(fn) &#123;</span><br><span class="line">  let arr = [];</span><br><span class="line">  for (let i = 0; i &lt; this.length; i++) &#123;</span><br><span class="line">    arr.push(fn(this[i], i))</span><br><span class="line">  &#125;</span><br><span class="line">  return arr;</span><br><span class="line">&#125;</span><br><span class="line">const arr2 = [1, 23, 3, 45, 6];</span><br><span class="line">const res = arr2.myMap(function (item, index) &#123;</span><br><span class="line">  return item + index;</span><br><span class="line">&#125;)</span><br><span class="line">console.log(res);//[1, 24, 5, 48, 10]</span><br></pre></td></tr></table></figure><p>这样就实现了一个我们自己的map方法，在效果方面与js中自带的方法几乎没有差别，实现js中其他的高阶函数的做法和这个类似。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>通过了解掌握高阶函数对于理解js中的函数很有帮助，并且学会使用高阶函数在以后的开发中也会很有帮助。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;函数是一门语言的重要组成部分，并且js中的函数还有很多特别的地方，比如函数是第一公民，那么这次来了解一下什么是高阶函数。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JS中的基本包装类型</title>
    <link href="https://q32757468.github.io/2019/07/16/JS%E4%B8%AD%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B/"/>
    <id>https://q32757468.github.io/2019/07/16/JS中的基本包装类型/</id>
    <published>2019-07-16T03:38:20.000Z</published>
    <updated>2019-07-16T04:54:38.098Z</updated>
    
    <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><blockquote><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;我们都知道js中的数据有两大类型，基本数据类型和引用类型，但是我们也知道从逻辑上来说其实基本类型的数据其实并不是对象，也就没有属性和方法，但实际上我们在使用的过程中这些基本类型的数据也是有属性和方法的，其实这主要是依赖于基本包装类型。<br><a id="more"></a></p></blockquote><h3 id="理解基本包装类型"><a href="#理解基本包装类型" class="headerlink" title="理解基本包装类型"></a>理解基本包装类型</h3><ul><li><p>那么为什么我们使用的基本类型数据会有方法和属性呢，其实主要是由于基本包装类型的原因，当我们在对基本类型的数据调用一个属性或者方法时其实后台还会有一系列的操作来进行转换，从而能够正确的获取结果，我们可以像下面这样理解：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  const str=&apos;这是一个字符串&apos;;</span><br><span class="line">  const len=str.length;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>通过这样的操作我们可以length这个属性来获取到字符串的长度，并且将这个长度赋值给 len 这个变量。、</p></li></ul><p>+但实际上它在后台的操作可以这样进行理解：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">const str_ = new String(&apos;这是一个字符串&apos;);  //创建基本包装类型的对象，并且自动获取到字符串的值</span><br><span class="line">const len=str_.length;    //调用基本包装类型对象的属性来获取长度</span><br><span class="line">str_=null;              //调用结束后销毁对象</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>通过上面的例子我们就可以很简单的理解基本包装类型了，基本包装类型就像是一个中转站一样，虽然基本类型的数据不是对象，但是通过后台的操作创建一个基本包装类型对象，所以我们调用基本类型的属性或者是方法实际上调用的是基本包装类型的属性或者方法，当调用完毕后再进行销毁，最终我们看到的结果就像是基本数据类型有属性或者是方法一样。</p><h3 id="不能给基本类型数据添加属性或者方法"><a href="#不能给基本类型数据添加属性或者方法" class="headerlink" title="不能给基本类型数据添加属性或者方法"></a>不能给基本类型数据添加属性或者方法</h3><p>我们可以看出虽然基本类型数据表面上看起来可以调用数据和方法，但是实际上我们也还是不能够给他们添加方法或者是属性，因为他们根本上还是基本类型数据，并且基本包装类型对象在执行完毕后会立即销毁：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  var str2 = &apos;字符串&apos;;</span><br><span class="line">  str2.name = &apos;csz&apos;;</span><br><span class="line">  console.log(str2.name);//报错，不能在字符串上创建</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="可以创建基本包装类型对象"><a href="#可以创建基本包装类型对象" class="headerlink" title="可以创建基本包装类型对象"></a>可以创建基本包装类型对象</h3><p>我们可以通过显示调用<code>Boolean、Number、String</code>来创建基本包装类型对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  const str = new String(&apos;这是一个通过构造函数创建的字符串&apos;);</span><br><span class="line">  const num = new Number(1234);</span><br><span class="line">  const res = new Boolean(true);</span><br><span class="line">  const str2 = new Object(&apos;这是一个通过Object构造函数创建的字符串&apos;);</span><br><span class="line">  console.log(typeof str);//object</span><br><span class="line">  console.log(str instanceof String);//true</span><br><span class="line">  console.log(typeof num);//object</span><br><span class="line">  console.log(num instanceof Number);//true</span><br><span class="line">  console.log(typeof str2);//object</span><br><span class="line">  console.log(str2 instanceof String);//true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>可以看出是可以通过显示的创建基本包装类型对象的，甚至可以直接通过<code>Objct</code>构造函数自动识别来创建，但是并不推荐通过这种方式来创建基本类型数据，因为这样创建的数据通过<code>typeof</code>判断的是一个对象，而不是基本数据类型。</p><p>特别是在创建Boolean类型数据时尤为要注意：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  const res = new Boolean(false);</span><br><span class="line">  console.log(res &amp;&amp; true);//true </span><br><span class="line">  const res2 = false;</span><br><span class="line">  console.log(res2 &amp;&amp; true);//false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>得到这个结果也并不奇怪，因为通过基本包装类型创建的数据实际上是一个对象，当进行比较运算时，对象都是一律按<code>true</code>处理的，所以这里并不能得到我们想要的结果。</p><blockquote><p>所以建议永远不要通过实例化构造函数的形式来创建Boolean类型的数据。</p></blockquote><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>基本包装类型很好理解，了解基本包装类型对于对于理解js运作机制也很有帮助，还有就是一些要注意的地方，比如不要不要通过实例化构造函数的形式来创建Boolean类型的数据。</p>]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;前言&quot;&gt;&lt;a href=&quot;#前言&quot; class=&quot;headerlink&quot; title=&quot;前言&quot;&gt;&lt;/a&gt;前言&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;我们都知道js中的数据有两大类型，基本数据类型和引用类型，但是我们也知道从逻辑上来说其实基本类型的数据其实并不是对象，也就没有属性和方法，但实际上我们在使用的过程中这些基本类型的数据也是有属性和方法的，其实这主要是依赖于基本包装类型。&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
